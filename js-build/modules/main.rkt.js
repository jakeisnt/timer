import * as $rjs_core from '../runtime/core.js';import * as M0 from "../links/racketscript-compiler/racketscript/interop.rkt.js";import * as M1 from "../links/racketscript-compiler/racketscript/browser.rkt.js";import * as M2 from "../runtime/kernel.rkt.js";import * as M3 from "../collects/racket/private/pre-base.rkt.js";import * as M4 from "../runtime/read.rkt.js";import * as M5 from "../links/racketscript-compiler/racketscript/private/interop.rkt.js";var MINS_PARAM = $rjs_core.UString.make("mins");var SECS_PARAM = $rjs_core.UString.make("secs");var FLIP_PARAM = $rjs_core.UString.make("flip");var MIN_SECS = 1;var MAX_SECS = (59*60)+59;var DEFAULT_SECS = 300;var PROF_ANIM_CLASS_NAME = $rjs_core.UString.make("prof-animation");var screen_width = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}var or_part1 = M1.document.documentElement.clientWidth;if (or_part1!==false) {var if_res2 = or_part1;} else {var or_part2 = M1.document.body.clientWidth;if (or_part2!==false) {var if_res1 = or_part2;} else {var if_res1 = M1.window.innerWidth;}var if_res2 = if_res1;}return if_res2;};var screen_height = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}var or_part3 = M1.document.documentElement.clientHeight;if (or_part3!==false) {var if_res4 = or_part3;} else {var or_part4 = M1.document.body.clientHeight;if (or_part4!==false) {var if_res3 = or_part4;} else {var if_res3 = M1.window.innerHeight;}var if_res4 = if_res3;}return if_res4;};var cur_performance = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return performance.now();};var get_query_param = function(param_name5) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var query_string6 = M1.window.location.search;var urlparams7 = new URLSearchParams(query_string6);var param_result8 = urlparams7.get(M0.js_string(param_name5));if (M2.void_p(param_result8)!==false) {var if_res5 = false;} else {var if_res5 = M0.js_string__gt_string(param_result8);}return if_res5;};var get_elem_by_id = function(id9) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M1.document.getElementById(M0.js_string(id9));};var set_elem_bang_ = function(elem10, body11) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}elem10.innerHTML = body11;return null;};var set_elem_by_id_bang_ = function(id12, val13) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var el14 = M1.document.getElementById(M0.js_string(id12));return set_elem_bang_(el14,M0.js_string(val13));};var create_elem = function(tagname15) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M1.document.createElement(M0.js_string(tagname15));};var add_img = function(path16) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var img17 = create_elem($rjs_core.UString.make("img"));img17.src = path16;return img17;};var load_sound = function(path18) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var sound19 = new Audio(path18);return sound19;};var play_sound = function(sound20) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}sound20.play();return sound20;};var pause_sound = function(sound21) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}sound21.pause();return sound21;};var pad_str = function(s22) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return s22;};var sanitize_number = function(n23) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (n23!==false) {if (M2.number_p(M2.string__gt_number(n23))!==false) {var num24 = M2.string__gt_number(n23);if (M2.__lt_(num24,0)!==false) {var if_res6 = false;} else {var if_res6 = M2.floor(num24);}var if_res7 = if_res6;} else {var if_res7 = false;}var if_res8 = if_res7;} else {var if_res8 = false;}return if_res8;};var ensure_in = function(a25, b26) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return function(n27) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M2.__lt_(n27,a25)!==false) {var if_res10 = a25;} else {if (M2.__gt_(n27,b26)!==false) {var if_res9 = b26;} else {var if_res9 = n27;}var if_res10 = if_res9;}return if_res10;};};var ensure_in_secs = ensure_in(MIN_SECS,MAX_SECS);var minutes__gt_seconds = function(tm28) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return tm28*60;};var seconds__gt_mins_plus_secs = function(secs29) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var minutes30 = M2.floor(secs29/60);var seconds31 = M2.floor(secs29-(minutes30*60));return M2.values(minutes30,seconds31);};var now = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return new Date;};var get_stop_time = function(num_secs32) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var cur_time33 = now();cur_time33.setSeconds(cur_time33.getSeconds()+num_secs32);return cur_time33;};var seconds_left = function(goal34, cur_time35) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M2.floor((goal34-cur_time35)/1000);};var mins_secs_diff = function(goal36, cur_time37) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return seconds__gt_mins_plus_secs(seconds_left(goal36,cur_time37));};var no_diff_p = function(goal38, curr_time39) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M2.__eq_(0,seconds_left(goal38,curr_time39));};var get_time_between40 = function(goal_time341, cur_time442, flip143, max_time244) {if (arguments.length!==4) {throw $rjs_core.racketContractError("arity mismatch");} else {}var goal_time45 = goal_time341;var cur_time46 = cur_time442;if (false!==false) {var if_res11 = false;} else {var if_res11 = flip143;}var flip47 = if_res11;if (false!==false) {var if_res12 = 0;} else {var if_res12 = max_time244;}var max_time48 = if_res12;var secs_left49 = seconds_left(goal_time45,cur_time46);if (flip47!==false) {var if_res13 = seconds__gt_mins_plus_secs(max_time48-secs_left49);} else {var if_res13 = seconds__gt_mins_plus_secs(secs_left49);}return if_res13;};var cl14 = function(goal_time50, cur_time51) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return get_time_between40(goal_time50,cur_time51,false,0);};var cl15 = function(goal_time52, cur_time53, flip54, max_time255) {if (arguments.length!==4) {throw $rjs_core.racketContractError("arity mismatch");} else {}return get_time_between40(goal_time52,cur_time53,flip54,max_time255);};var cl16 = function(goal_time56, cur_time57, flip158) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}return get_time_between40(goal_time56,cur_time57,flip158,0);};var get_time_between = $rjs_core.attachProcedureArity(function() {var fixed_lam17 = {'2':cl14,'4':cl15,'3':cl16}[arguments.length];if (fixed_lam17!==undefined) {return fixed_lam17.apply(null,arguments);} else {return M2.error($rjs_core.UString.make("case-lambda: invalid case"));}},[2,3,4]);var get_seconds_param = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return sanitize_number(get_query_param(SECS_PARAM));};var get_minutes_param = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return sanitize_number(get_query_param(MINS_PARAM));};var get_seconds = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}var mb_mins59 = get_minutes_param();var mb_secs60 = get_seconds_param();if (mb_mins59!==false) {var if_res18 = mb_secs60;} else {var if_res18 = false;}if (if_res18!==false) {var if_res21 = minutes__gt_seconds(mb_mins59)+mb_secs60;} else {if (mb_mins59!==false) {var if_res20 = minutes__gt_seconds(mb_mins59);} else {if (mb_secs60!==false) {var if_res19 = mb_secs60;} else {var if_res19 = DEFAULT_SECS;}var if_res20 = if_res19;}var if_res21 = if_res20;}return ensure_in_secs(if_res21);};var get_flip_param = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M2.equal_p($rjs_core.UString.make("t"),get_query_param(FLIP_PARAM));};var START_TIME = get_seconds();var TIME_LEFT = START_TIME;var TIMER = false;var FLIP = get_flip_param();var ALARM = load_sound($rjs_core.UString.make("assets/alarm.mp3"));var END_ANIMATION = false;var set_timer_bang_ = function(goal_time61, cur_time62) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var let_result22 = get_time_between(goal_time61,cur_time62,FLIP,START_TIME);var mins63 = let_result22.getAt(0);var secs64 = let_result22.getAt(1);TIME_LEFT = seconds_left(goal_time61,cur_time62);if (M2.__eq_(mins63,1)!==false) {var if_res23 = set_elem_by_id_bang_($rjs_core.UString.make("mins-label"),$rjs_core.UString.make("minute"));} else {var if_res23 = set_elem_by_id_bang_($rjs_core.UString.make("mins-label"),$rjs_core.UString.make("minutes"));}if_res23;if (M2.__eq_(secs64,1)!==false) {var if_res24 = set_elem_by_id_bang_($rjs_core.UString.make("secs-label"),$rjs_core.UString.make("second"));} else {var if_res24 = set_elem_by_id_bang_($rjs_core.UString.make("secs-label"),$rjs_core.UString.make("seconds"));}if_res24;set_elem_by_id_bang_($rjs_core.UString.make("minutes"),pad_str(mins63));return set_elem_by_id_bang_($rjs_core.UString.make("seconds"),pad_str(secs64));};var start_timer65 = function(tm666, timeout567) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var tm68 = tm666;if (false!==false) {var if_res25 = 100;} else {var if_res25 = timeout567;}var timeout69 = if_res25;start_button.innerHTML = $rjs_core.UString.make("pause");var let_result26 = M2.values();var goal_time70 = get_stop_time(1+tm68);var interval_fn71 = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}var cur_time73 = now();set_timer_bang_(goal_time70,cur_time73);if (no_diff_p(goal_time70,cur_time73)!==false) {var if_res27 = on_timer_end_bang_(interval72);} else {var if_res27 = M2.rvoid();}return if_res27;};var interval72 = setInterval(interval_fn71,timeout69);TIMER = interval72;return interval72;};var cl28 = function(tm74) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return start_timer65(tm74,100);};var cl29 = function(tm75, timeout576) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return start_timer65(tm75,timeout576);};var start_timer = $rjs_core.attachProcedureArity(function() {var fixed_lam30 = {'1':cl28,'2':cl29}[arguments.length];if (fixed_lam30!==undefined) {return fixed_lam30.apply(null,arguments);} else {return M2.error($rjs_core.UString.make("case-lambda: invalid case"));}},[1,2]);var toggle_timer_bang_ = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M2.not(TIMER)!==false) {var if_res31 = M2.__eq_(TIME_LEFT,0);} else {var if_res31 = false;}if (if_res31!==false) {var if_res34 = start_timer(START_TIME);} else {if (M2.not(TIMER)!==false) {var if_res33 = start_timer(TIME_LEFT);} else {if (TIMER!==false) {var if_res32 = pause_timer_bang_(TIMER);} else {var if_res32 = start_timer(TIME_LEFT);}var if_res33 = if_res32;}var if_res34 = if_res33;}return if_res34;};var remove_elems_by_classname = function(name77) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var elems_to_rm78 = document.getElementsByClassName(name77);var obj79 = elems_to_rm78;var keys80 = Object.keys(elems_to_rm78);if (M0.js_object_p(obj79)!==false) {var if_res35 = M2.rvoid();} else {var if_res35 = M0.__rjs_quoted__.in_js_array(obj79);}if_res35;var for_loop81 = function(i82) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M2.__lt_(i82,keys80.length)!==false) {var _83 = keys80[i82];var elem84 = obj79[keys80[i82]];if (true!==false) {if (M2.not(M2.void_p(elem84))!==false) {elem84.parentNode.removeChild(elem84);var let_result36 = M2.values();var if_res37 = M2.values();} else {var if_res37 = M2.values();}var let_result38 = if_res37;if (true!==false) {var if_res39 = M2.not(false);} else {var if_res39 = false;}if (if_res39!==false) {var if_res40 = for_loop81(i82+1);} else {var if_res40 = M2.values();}var if_res41 = if_res40;} else {var if_res41 = M2.values();}var if_res42 = if_res41;} else {var if_res42 = M2.values();}return if_res42;};for_loop81(0);var let_result43 = M2.values();M2.rvoid();var let_result44 = M2.values();var elems_left85 = document.getElementsByClassName(name77);if (M2.__lt_(0,elems_left85.length)!==false) {var if_res45 = remove_elems_by_classname(name77);} else {var if_res45 = M2.rvoid();}return if_res45;};var stop_end_animation_bang_ = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (END_ANIMATION!==false) {clearInterval(END_ANIMATION);END_ANIMATION = false;var if_res46 = null;} else {var if_res46 = M2.rvoid();}if_res46;return remove_elems_by_classname(PROF_ANIM_CLASS_NAME);};var reset_timer_bang_ = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}stop_end_animation_bang_();if (TIMER!==false) {var if_res47 = pause_timer_bang_(TIMER);} else {var if_res47 = M2.rvoid();}if_res47;return set_initial_timer_bang_();};var set_initial_timer_bang_ = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return set_timer_bang_(get_stop_time(START_TIME),now());};var pause_timer_bang_ = function(in86) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}clearInterval(in86);start_button.innerHTML = $rjs_core.UString.make("start");TIMER = false;return null;};var flip_bang_ = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}FLIP = M2.not(FLIP);if (FLIP!==false) {flip_button.innerHTML = $rjs_core.UString.make("count down");var if_res48 = null;} else {flip_button.innerHTML = $rjs_core.UString.make("count up");var if_res48 = null;}if_res48;return set_timer_bang_(get_stop_time(TIME_LEFT),now());};var on_timer_end_bang_ = function(in87) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}pause_timer_bang_(in87);var let_result49 = M2.values();play_sound(ALARM);var let_result50 = M2.values();var end88 = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M2.__eq_(0,M3.random(2))!==false) {var if_res51 = $rjs_core.UString.make("assets/lerner.png");} else {var if_res51 = $rjs_core.UString.make("assets/amal.png");}return on_game_end(if_res51,M3.random(screen_width()),M3.random(screen_height()),M3.random()-0.5,M3.random()-0.5);};END_ANIMATION = setInterval(end88,250);return null;};var start_button = get_elem_by_id($rjs_core.UString.make("start-button"));start_button.onclick = function(_89) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return toggle_timer_bang_();};var reset_button = get_elem_by_id($rjs_core.UString.make("reset-button"));reset_button.onclick = function(_90) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return reset_timer_bang_();};var flip_button = get_elem_by_id($rjs_core.UString.make("flip-button"));flip_button.onclick = function(_91) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return flip_bang_();};M1.document.onkeyup = function(e92) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M2.__eq_(e92.keyCode,32)!==false) {var if_res52 = toggle_timer_bang_();} else {var if_res52 = M2.rvoid();}return if_res52;};set_initial_timer_bang_();flip_bang_();flip_bang_();var on_game_end93 = function(pic_name1194, start_x795, start_y896, vx_default997, vy_default1098) {if (arguments.length!==5) {throw $rjs_core.racketContractError("arity mismatch");} else {}var pic_name99 = pic_name1194;if (false!==false) {var if_res53 = 0;} else {var if_res53 = start_x795;}var start_x100 = if_res53;if (false!==false) {var if_res54 = 0;} else {var if_res54 = start_y896;}var start_y101 = if_res54;if (false!==false) {var if_res55 = 0.3;} else {var if_res55 = vx_default997;}var vx_default102 = if_res55;if (false!==false) {var if_res56 = 0.3;} else {var if_res56 = vy_default1098;}var vy_default103 = if_res56;var img104 = add_img(pic_name99);img104.style.position = $rjs_core.UString.make("absolute");var let_result57 = M2.values();img104.style.zIndex = $rjs_core.UString.make("999");var let_result58 = M2.values();img104.style.top = $rjs_core.UString.make("0");var let_result59 = M2.values();img104.style.left = $rjs_core.UString.make("0");var let_result60 = M2.values();img104.className = PROF_ANIM_CLASS_NAME;var let_result61 = M2.values();M1.document.body.appendChild(img104);var let_result62 = M2.values();var x105 = start_x100;var y106 = start_y101;var w107 = 100;var h108 = 100;var vx109 = vx_default102;var vy110 = vy_default103;var prev111 = cur_performance();var frame112 = function(ts113) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var W114 = screen_width();var H115 = screen_height();var dt116 = ts113-prev111;x105 = M2.max(0,M2.min(W114-w107,x105+(dt116*vx109)));y106 = M2.max(0,M2.min(H115-h108,y106+(dt116*vy110)));img104.style.transform = M0.js_string(M2.string_append($rjs_core.UString.make("translate("),M2.number__gt_string(x105),$rjs_core.UString.make("px, "),M2.number__gt_string(y106),$rjs_core.UString.make("px)")));var or_part117 = M2.__lt__eq_(x105,0);if (or_part117!==false) {var if_res63 = or_part117;} else {var if_res63 = M2.__gt__eq_(x105+w107,W114);}if (if_res63!==false) {vx109 = vx109*-1;var if_res64 = null;} else {var if_res64 = M2.rvoid();}if_res64;var or_part118 = M2.__lt__eq_(y106,0);if (or_part118!==false) {var if_res65 = or_part118;} else {var if_res65 = M2.__gt__eq_(y106+h108,H115);}if (if_res65!==false) {vy110 = vy110*-1;var if_res66 = null;} else {var if_res66 = M2.rvoid();}if_res66;prev111 = ts113;return M1.window.requestAnimationFrame(frame112);};return M1.window.requestAnimationFrame(frame112);};var cl67 = function(pic_name119) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return on_game_end93(pic_name119,0,0,0.3,0.3);};var cl68 = function(pic_name120, start_x121, start_y122, vx_default123, vy_default10124) {if (arguments.length!==5) {throw $rjs_core.racketContractError("arity mismatch");} else {}return on_game_end93(pic_name120,start_x121,start_y122,vx_default123,vy_default10124);};var cl69 = function(pic_name125, start_x126, start_y127, vx_default9128) {if (arguments.length!==4) {throw $rjs_core.racketContractError("arity mismatch");} else {}return on_game_end93(pic_name125,start_x126,start_y127,vx_default9128,0.3);};var cl70 = function(pic_name129, start_x130, start_y8131) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}return on_game_end93(pic_name129,start_x130,start_y8131,0.3,0.3);};var cl71 = function(pic_name132, start_x7133) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return on_game_end93(pic_name132,start_x7133,0,0.3,0.3);};var on_game_end = $rjs_core.attachProcedureArity(function() {var fixed_lam72 = {'1':cl67,'5':cl68,'4':cl69,'3':cl70,'2':cl71}[arguments.length];if (fixed_lam72!==undefined) {return fixed_lam72.apply(null,arguments);} else {return M2.error($rjs_core.UString.make("case-lambda: invalid case"));}},[1,2,3,4,5]);var __rjs_quoted__ = {};export { __rjs_quoted__ };