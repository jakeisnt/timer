import * as $rjs_core from '../runtime/core.js';import * as M0 from "../links/racketscript-compiler/racketscript/interop.rkt.js";import * as M1 from "../links/racketscript-compiler/racketscript/browser.rkt.js";import * as M2 from "../runtime/kernel.rkt.js";import * as M3 from "../runtime/read.rkt.js";import * as M4 from "../links/racketscript-compiler/racketscript/private/interop.rkt.js";var MINS_PARAM = $rjs_core.UString.make("mins");var SECS_PARAM = $rjs_core.UString.make("secs");var FLIP_PARAM = $rjs_core.UString.make("flip");var DEFAULT_SECS = 300;var screen_width = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}var or_part1 = M1.document.documentElement.clientWidth;if (or_part1!==false) {var if_res2 = or_part1;} else {var or_part2 = M1.document.body.clientWidth;if (or_part2!==false) {var if_res1 = or_part2;} else {var if_res1 = M1.window.innerWidth;}var if_res2 = if_res1;}return if_res2;};var screen_height = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}var or_part3 = M1.document.documentElement.clientHeight;if (or_part3!==false) {var if_res4 = or_part3;} else {var or_part4 = M1.document.body.clientHeight;if (or_part4!==false) {var if_res3 = or_part4;} else {var if_res3 = M1.window.innerHeight;}var if_res4 = if_res3;}return if_res4;};var cur_performance = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return performance.now();};var get_query_param = function(param_name5) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var query_string6 = M1.window.location.search;var urlparams7 = new URLSearchParams(query_string6);return urlparams7.get(param_name5);};var get_elem_by_id = function(id8) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M1.document.getElementById(M0.js_string(id8));};var set_html_bang_ = function(elem9, body10) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}elem9.innerHTML = body10;return null;};var create_elem = function(tagname11) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M1.document.createElement(M0.js_string(tagname11));};var pad_str = function(s12) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return s12;};var add_img = function(path13) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var img14 = create_elem($rjs_core.UString.make("img"));img14.src = path13;return img14;};var minutes__gt_seconds = function(tm15) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M0.js_string(tm15)*60;};var set_elem_bang_ = function(id16, val17) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var el18 = M1.document.getElementById(M0.js_string(id16));el18.innerHTML = M0.js_string(val17);return null;};var now = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return new Date;};var get_stop_time = function(num_secs19) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var cur_time20 = now();cur_time20.setSeconds(cur_time20.getSeconds()+num_secs19);return cur_time20;};var mins_secs_diff = function(goal21, cur_time22) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var dist23 = goal21-cur_time22;var minutes24 = M2.floor(dist23/60000);var seconds25 = M2.floor((dist23-(60000*minutes24))/1000);return M2.values(minutes24,seconds25);};var seconds_left = function(goal26, cur_time27) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var let_result5 = mins_secs_diff(goal26,cur_time27);var mins28 = let_result5.getAt(0);var secs29 = let_result5.getAt(1);return (mins28*60)+secs29;};var no_diff_p = function(goal30, curr_time31) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var let_result6 = mins_secs_diff(goal30,curr_time31);var mins32 = let_result6.getAt(0);var secs33 = let_result6.getAt(1);if (M2.__eq_(mins32,0)!==false) {var if_res7 = M2.__eq_(secs33,0);} else {var if_res7 = false;}return if_res7;};var sanitize_number = function(n34) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M2.string__gt_number(M0.js_string__gt_string(n34));};var get_seconds = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}var mb_param35 = get_query_param(MINS_PARAM);var ms_param36 = get_query_param(SECS_PARAM);if (M2.not(M2.void_p(mb_param35))!==false) {var if_res8 = M2.not(M2.void_p(ms_param36));} else {var if_res8 = false;}if (if_res8!==false) {var if_res11 = minutes__gt_seconds(sanitize_number(mb_param35))+sanitize_number(ms_param36);} else {if (M2.not(M2.void_p(mb_param35))!==false) {var if_res10 = minutes__gt_seconds(sanitize_number(mb_param35));} else {if (M2.not(M2.void_p(ms_param36))!==false) {var if_res9 = sanitize_number(ms_param36);} else {var if_res9 = DEFAULT_SECS;}var if_res10 = if_res9;}var if_res11 = if_res10;}return if_res11;};var should_flip = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M2.equal_p($rjs_core.UString.make("t"),get_query_param(FLIP_PARAM));};var START_TIME = get_seconds();var TIME_LEFT = START_TIME;var TIMER = false;var FLIP = should_flip();var get_time_between = function(goal_time37, cur_time38) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var let_result12 = mins_secs_diff(goal_time37,cur_time38);var mins39 = let_result12.getAt(0);var secs40 = let_result12.getAt(1);if (FLIP!==false) {var mins_start41 = M2.floor(START_TIME/60);var secs_start42 = START_TIME-(mins_start41*60);var if_res13 = M2.values(mins_start41-mins39,secs_start42-secs40);} else {var if_res13 = M2.values(mins39,secs40);}return if_res13;};var set_timer_bang_ = function(goal_time43, cur_time44) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var let_result14 = get_time_between(goal_time43,cur_time44);var mins45 = let_result14.getAt(0);var secs46 = let_result14.getAt(1);TIME_LEFT = seconds_left(goal_time43,cur_time44);if (M2.__eq_(mins45,1)!==false) {var if_res15 = set_elem_bang_($rjs_core.UString.make("mins-label"),$rjs_core.UString.make("minute"));} else {var if_res15 = set_elem_bang_($rjs_core.UString.make("mins-label"),$rjs_core.UString.make("minutes"));}if_res15;if (M2.__eq_(secs46,1)!==false) {var if_res16 = set_elem_bang_($rjs_core.UString.make("secs-label"),$rjs_core.UString.make("second"));} else {var if_res16 = set_elem_bang_($rjs_core.UString.make("secs-label"),$rjs_core.UString.make("seconds"));}if_res16;set_elem_bang_($rjs_core.UString.make("minutes"),pad_str(mins45));return set_elem_bang_($rjs_core.UString.make("seconds"),pad_str(secs46));};var start_button = get_elem_by_id($rjs_core.UString.make("start-button"));var pause_timer_bang_ = function(in47) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}clearInterval(in47);start_button.innerHTML = $rjs_core.UString.make("start");TIMER = false;return null;};var set_initial_timer_bang_ = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return set_timer_bang_(get_stop_time(START_TIME),now());};var on_game_end_bang_ = function(in48) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}pause_timer_bang_(in48);on_game_end($rjs_core.UString.make("lerner.png"),-100);return on_game_end($rjs_core.UString.make("amal.png"),0,-100,0.2,0.5);};var start_timer49 = function(tm250, timeout151) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var tm52 = tm250;if (false!==false) {var if_res17 = 100;} else {var if_res17 = timeout151;}var timeout53 = if_res17;start_button.innerHTML = $rjs_core.UString.make("pause");var let_result18 = M2.values();var goal_time54 = get_stop_time(1+tm52);var interval_fn55 = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}var cur_time57 = now();set_timer_bang_(goal_time54,cur_time57);if (no_diff_p(goal_time54,cur_time57)!==false) {var if_res19 = on_game_end_bang_(interval56);} else {var if_res19 = M2.rvoid();}return if_res19;};var interval56 = setInterval(interval_fn55,timeout53);TIMER = interval56;return interval56;};var cl20 = function(tm58) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return start_timer49(tm58,100);};var cl21 = function(tm59, timeout160) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return start_timer49(tm59,timeout160);};var start_timer = $rjs_core.attachProcedureArity(function() {var fixed_lam22 = {'1':cl20,'2':cl21}[arguments.length];if (fixed_lam22!==undefined) {return fixed_lam22.apply(null,arguments);} else {return M2.error($rjs_core.UString.make("case-lambda: invalid case"));}},[1,2]);set_initial_timer_bang_();var toggle_timer_bang_ = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M2.not(TIMER)!==false) {var if_res23 = M2.__eq_(TIME_LEFT,0);} else {var if_res23 = false;}if (if_res23!==false) {var if_res26 = start_timer(START_TIME);} else {if (M2.not(TIMER)!==false) {var if_res25 = start_timer(TIME_LEFT);} else {if (TIMER!==false) {var if_res24 = pause_timer_bang_(TIMER);} else {var if_res24 = start_timer(TIME_LEFT);}var if_res25 = if_res24;}var if_res26 = if_res25;}return if_res26;};var reset_timer_bang_ = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (TIMER!==false) {var if_res27 = pause_timer_bang_(TIMER);} else {var if_res27 = M2.rvoid();}if_res27;return set_initial_timer_bang_();};start_button.onclick = function(_61) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return toggle_timer_bang_();};var reset_button = get_elem_by_id($rjs_core.UString.make("reset-button"));reset_button.onclick = function(_62) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return reset_timer_bang_();};var flip_button = get_elem_by_id($rjs_core.UString.make("flip-button"));var flip_bang_ = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}FLIP = M2.not(FLIP);return set_timer_bang_(get_stop_time(TIME_LEFT),now());};flip_button.onclick = function(_63) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return flip_bang_();};M1.document.onkeyup = function(e64) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M2.__eq_(e64.keyCode,32)!==false) {var if_res28 = toggle_timer_bang_();} else {var if_res28 = M2.rvoid();}return if_res28;};var on_game_end65 = function(pic_name766, start_x367, start_y468, vx_default569, vy_default670) {if (arguments.length!==5) {throw $rjs_core.racketContractError("arity mismatch");} else {}var pic_name71 = pic_name766;if (false!==false) {var if_res29 = 0;} else {var if_res29 = start_x367;}var start_x72 = if_res29;if (false!==false) {var if_res30 = 0;} else {var if_res30 = start_y468;}var start_y73 = if_res30;if (false!==false) {var if_res31 = 0.3;} else {var if_res31 = vx_default569;}var vx_default74 = if_res31;if (false!==false) {var if_res32 = 0.3;} else {var if_res32 = vy_default670;}var vy_default75 = if_res32;var img76 = add_img(pic_name71);img76.style.position = $rjs_core.UString.make("absolute");var let_result33 = M2.values();img76.style.zIndex = $rjs_core.UString.make("999");var let_result34 = M2.values();img76.style.top = $rjs_core.UString.make("0");var let_result35 = M2.values();img76.style.left = $rjs_core.UString.make("0");var let_result36 = M2.values();M1.document.body.appendChild(img76);var let_result37 = M2.values();var x77 = start_x72;var y78 = start_y73;var w79 = 100;var h80 = 100;var vx81 = vx_default74;var vy82 = vy_default75;var prev83 = cur_performance();var frame84 = function(ts85) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var W86 = screen_width();var H87 = screen_height();var dt88 = ts85-prev83;x77 = M2.max(0,M2.min(W86-w79,x77+(dt88*vx81)));y78 = M2.max(0,M2.min(H87-h80,y78+(dt88*vy82)));img76.style.transform = M0.js_string(M2.string_append($rjs_core.UString.make("translate("),M2.number__gt_string(x77),$rjs_core.UString.make("px, "),M2.number__gt_string(y78),$rjs_core.UString.make("px)")));var or_part89 = M2.__lt__eq_(x77,0);if (or_part89!==false) {var if_res38 = or_part89;} else {var if_res38 = M2.__gt__eq_(x77+w79,W86);}if (if_res38!==false) {vx81 = vx81*-1;var if_res39 = null;} else {var if_res39 = M2.rvoid();}if_res39;var or_part90 = M2.__lt__eq_(y78,0);if (or_part90!==false) {var if_res40 = or_part90;} else {var if_res40 = M2.__gt__eq_(y78+h80,H87);}if (if_res40!==false) {vy82 = vy82*-1;var if_res41 = null;} else {var if_res41 = M2.rvoid();}if_res41;prev83 = ts85;return M1.window.requestAnimationFrame(frame84);};return M1.window.requestAnimationFrame(frame84);};var cl42 = function(pic_name91) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return on_game_end65(pic_name91,0,0,0.3,0.3);};var cl43 = function(pic_name92, start_x93, start_y94, vx_default95, vy_default696) {if (arguments.length!==5) {throw $rjs_core.racketContractError("arity mismatch");} else {}return on_game_end65(pic_name92,start_x93,start_y94,vx_default95,vy_default696);};var cl44 = function(pic_name97, start_x98, start_y99, vx_default5100) {if (arguments.length!==4) {throw $rjs_core.racketContractError("arity mismatch");} else {}return on_game_end65(pic_name97,start_x98,start_y99,vx_default5100,0.3);};var cl45 = function(pic_name101, start_x102, start_y4103) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}return on_game_end65(pic_name101,start_x102,start_y4103,0.3,0.3);};var cl46 = function(pic_name104, start_x3105) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return on_game_end65(pic_name104,start_x3105,0,0.3,0.3);};var on_game_end = $rjs_core.attachProcedureArity(function() {var fixed_lam47 = {'1':cl42,'5':cl43,'4':cl44,'3':cl45,'2':cl46}[arguments.length];if (fixed_lam47!==undefined) {return fixed_lam47.apply(null,arguments);} else {return M2.error($rjs_core.UString.make("case-lambda: invalid case"));}},[1,2,3,4,5]);var __rjs_quoted__ = {};export { __rjs_quoted__ };