import * as $rjs_core from '../runtime/core.js';import * as M0 from "../links/racketscript-compiler/racketscript/interop.rkt.js";import * as M1 from "../links/racketscript-compiler/racketscript/browser.rkt.js";import * as M2 from "../runtime/kernel.rkt.js";import * as M3 from "../links/racketscript-compiler/racketscript/private/interop.rkt.js";import * as M4 from "../collects/racket/private/misc.rkt.js";import * as M5 from "../runtime/read.rkt.js";var MINS_PARAM = $rjs_core.UString.make("mins");var SECS_PARAM = $rjs_core.UString.make("secs");var FLIP_PARAM = $rjs_core.UString.make("flip");var DEFAULT_SECS = 300;var screen_width = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}var or_part1 = M1.document.documentElement.clientWidth;if (or_part1!==false) {var if_res2 = or_part1;} else {var or_part2 = M1.document.body.clientWidth;if (or_part2!==false) {var if_res1 = or_part2;} else {var if_res1 = M1.window.innerWidth;}var if_res2 = if_res1;}return if_res2;};var screen_height = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}var or_part3 = M1.document.documentElement.clientHeight;if (or_part3!==false) {var if_res4 = or_part3;} else {var or_part4 = M1.document.body.clientHeight;if (or_part4!==false) {var if_res3 = or_part4;} else {var if_res3 = M1.window.innerHeight;}var if_res4 = if_res3;}return if_res4;};var cur_performance = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return performance.now();};var get_query_param = function(param_name5) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var query_string6 = M1.window.location.search;var urlparams7 = new URLSearchParams(query_string6);return urlparams7.get(param_name5);};var get_elem_by_id = function(id8) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M1.document.getElementById(M0.js_string(id8));};var set_html_bang_ = function(elem9, body10) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}elem9.innerHTML = body10;return null;};var create_elem = function(tagname11) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M1.document.createElement(M0.js_string(tagname11));};var pad_str = function(s12) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var s_str13 = M0.js_string(s12);M4.println(s_str13);M4.println($rjs_core.UString.make("   ")+s_str13);if (M2.__eq_(1,s_str13.length)!==false) {var if_res5 = $rjs_core.UString.make(" ")+s_str13;} else {var if_res5 = s_str13;}return if_res5;};var add_img = function(path14) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var img15 = create_elem($rjs_core.UString.make("img"));img15.src = path14;return img15;};var minutes__gt_seconds = function(tm16) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M0.js_string(tm16)*60;};var set_elem_bang_ = function(id17, val18) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var el19 = M1.document.getElementById(M0.js_string(id17));el19.innerHTML = M0.js_string(val18);return null;};var now = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return new Date;};var get_stop_time = function(num_secs20) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var cur_time21 = now();cur_time21.setSeconds(cur_time21.getSeconds()+num_secs20);return cur_time21;};var mins_secs_diff = function(goal22, cur_time23) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var dist24 = goal22-cur_time23;var minutes25 = M2.floor(dist24/60000);var seconds26 = M2.floor((dist24-(60000*minutes25))/1000);return M2.values(minutes25,seconds26);};var seconds_left = function(goal27, cur_time28) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var let_result6 = mins_secs_diff(goal27,cur_time28);var mins29 = let_result6.getAt(0);var secs30 = let_result6.getAt(1);return (mins29*60)+secs30;};var no_diff_p = function(goal31, curr_time32) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var let_result7 = mins_secs_diff(goal31,curr_time32);var mins33 = let_result7.getAt(0);var secs34 = let_result7.getAt(1);if (M2.__eq_(mins33,0)!==false) {var if_res8 = M2.__eq_(secs34,0);} else {var if_res8 = false;}return if_res8;};var sanitize_number = function(n35) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M2.string__gt_number(M0.js_string__gt_string(n35));};var get_seconds = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}var mb_param36 = get_query_param(MINS_PARAM);var ms_param37 = get_query_param(SECS_PARAM);if (M2.not(M2.void_p(mb_param36))!==false) {var if_res9 = M2.not(M2.void_p(ms_param37));} else {var if_res9 = false;}if (if_res9!==false) {var if_res12 = minutes__gt_seconds(sanitize_number(mb_param36))+sanitize_number(ms_param37);} else {if (M2.not(M2.void_p(mb_param36))!==false) {var if_res11 = minutes__gt_seconds(sanitize_number(mb_param36));} else {if (M2.not(M2.void_p(ms_param37))!==false) {var if_res10 = sanitize_number(ms_param37);} else {var if_res10 = DEFAULT_SECS;}var if_res11 = if_res10;}var if_res12 = if_res11;}return if_res12;};var should_flip = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M2.equal_p($rjs_core.UString.make("t"),get_query_param(FLIP_PARAM));};var START_TIME = get_seconds();var TIME_LEFT = START_TIME;var TIMER = false;var FLIP = should_flip();var get_time_between = function(goal_time38, cur_time39) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var let_result13 = mins_secs_diff(goal_time38,cur_time39);var mins40 = let_result13.getAt(0);var secs41 = let_result13.getAt(1);if (FLIP!==false) {var mins_start42 = M2.floor(START_TIME/60);var secs_start43 = START_TIME-(mins_start42*60);var if_res14 = M2.values(mins_start42-mins40,secs_start43-secs41);} else {var if_res14 = M2.values(mins40,secs41);}return if_res14;};var set_timer_bang_ = function(goal_time44, cur_time45) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var let_result15 = get_time_between(goal_time44,cur_time45);var mins46 = let_result15.getAt(0);var secs47 = let_result15.getAt(1);TIME_LEFT = seconds_left(goal_time44,cur_time45);if (M2.__eq_(mins46,1)!==false) {var if_res16 = set_elem_bang_($rjs_core.UString.make("mins-label"),$rjs_core.UString.make("minute"));} else {var if_res16 = set_elem_bang_($rjs_core.UString.make("mins-label"),$rjs_core.UString.make("minutes"));}if_res16;if (M2.__eq_(secs47,1)!==false) {var if_res17 = set_elem_bang_($rjs_core.UString.make("secs-label"),$rjs_core.UString.make("second"));} else {var if_res17 = set_elem_bang_($rjs_core.UString.make("secs-label"),$rjs_core.UString.make("seconds"));}if_res17;set_elem_bang_($rjs_core.UString.make("minutes"),pad_str(mins46));return set_elem_bang_($rjs_core.UString.make("seconds"),pad_str(secs47));};var start_button = get_elem_by_id($rjs_core.UString.make("start-button"));var pause_timer_bang_ = function(in48) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}clearInterval(in48);start_button.innerHTML = $rjs_core.UString.make("start");TIMER = false;return null;};var set_initial_timer_bang_ = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return set_timer_bang_(get_stop_time(START_TIME),now());};var on_game_end_bang_ = function(in49) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}pause_timer_bang_(in49);on_game_end($rjs_core.UString.make("lerner.png"),-100);return on_game_end($rjs_core.UString.make("amal.png"),0,-100,0.2,0.5);};var start_timer50 = function(tm251, timeout152) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var tm53 = tm251;if (false!==false) {var if_res18 = 100;} else {var if_res18 = timeout152;}var timeout54 = if_res18;start_button.innerHTML = $rjs_core.UString.make("pause");var let_result19 = M2.values();var goal_time55 = get_stop_time(1+tm53);var interval_fn56 = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}var cur_time58 = now();set_timer_bang_(goal_time55,cur_time58);if (no_diff_p(goal_time55,cur_time58)!==false) {var if_res20 = on_game_end_bang_(interval57);} else {var if_res20 = M2.rvoid();}return if_res20;};var interval57 = setInterval(interval_fn56,timeout54);TIMER = interval57;return interval57;};var cl21 = function(tm59) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return start_timer50(tm59,100);};var cl22 = function(tm60, timeout161) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return start_timer50(tm60,timeout161);};var start_timer = $rjs_core.attachProcedureArity(function() {var fixed_lam23 = {'1':cl21,'2':cl22}[arguments.length];if (fixed_lam23!==undefined) {return fixed_lam23.apply(null,arguments);} else {return M2.error($rjs_core.UString.make("case-lambda: invalid case"));}},[1,2]);set_initial_timer_bang_();var toggle_timer_bang_ = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M2.not(TIMER)!==false) {var if_res24 = M2.__eq_(TIME_LEFT,0);} else {var if_res24 = false;}if (if_res24!==false) {var if_res27 = start_timer(START_TIME);} else {if (M2.not(TIMER)!==false) {var if_res26 = start_timer(TIME_LEFT);} else {if (TIMER!==false) {var if_res25 = pause_timer_bang_(TIMER);} else {var if_res25 = start_timer(TIME_LEFT);}var if_res26 = if_res25;}var if_res27 = if_res26;}return if_res27;};var reset_timer_bang_ = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (TIMER!==false) {var if_res28 = pause_timer_bang_(TIMER);} else {var if_res28 = M2.rvoid();}if_res28;return set_initial_timer_bang_();};start_button.onclick = function(_62) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return toggle_timer_bang_();};var reset_button = get_elem_by_id($rjs_core.UString.make("reset-button"));reset_button.onclick = function(_63) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return reset_timer_bang_();};var flip_button = get_elem_by_id($rjs_core.UString.make("flip-button"));var flip_bang_ = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}FLIP = M2.not(FLIP);return set_timer_bang_(get_stop_time(TIME_LEFT),now());};flip_button.onclick = function(_64) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return flip_bang_();};M1.document.onkeyup = function(e65) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M2.__eq_(e65.keyCode,32)!==false) {var if_res29 = toggle_timer_bang_();} else {var if_res29 = M2.rvoid();}return if_res29;};var on_game_end66 = function(pic_name767, start_x368, start_y469, vx_default570, vy_default671) {if (arguments.length!==5) {throw $rjs_core.racketContractError("arity mismatch");} else {}var pic_name72 = pic_name767;if (false!==false) {var if_res30 = 0;} else {var if_res30 = start_x368;}var start_x73 = if_res30;if (false!==false) {var if_res31 = 0;} else {var if_res31 = start_y469;}var start_y74 = if_res31;if (false!==false) {var if_res32 = 0.3;} else {var if_res32 = vx_default570;}var vx_default75 = if_res32;if (false!==false) {var if_res33 = 0.3;} else {var if_res33 = vy_default671;}var vy_default76 = if_res33;var img77 = add_img(pic_name72);img77.style.position = $rjs_core.UString.make("absolute");var let_result34 = M2.values();img77.style.zIndex = $rjs_core.UString.make("999");var let_result35 = M2.values();img77.style.top = $rjs_core.UString.make("0");var let_result36 = M2.values();img77.style.left = $rjs_core.UString.make("0");var let_result37 = M2.values();M1.document.body.appendChild(img77);var let_result38 = M2.values();var x78 = start_x73;var y79 = start_y74;var w80 = 100;var h81 = 100;var vx82 = vx_default75;var vy83 = vy_default76;var prev84 = cur_performance();var frame85 = function(ts86) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var W87 = screen_width();var H88 = screen_height();var dt89 = ts86-prev84;x78 = M2.max(0,M2.min(W87-w80,x78+(dt89*vx82)));y79 = M2.max(0,M2.min(H88-h81,y79+(dt89*vy83)));img77.style.transform = M0.js_string(M2.string_append($rjs_core.UString.make("translate("),M2.number__gt_string(x78),$rjs_core.UString.make("px, "),M2.number__gt_string(y79),$rjs_core.UString.make("px)")));var or_part90 = M2.__lt__eq_(x78,0);if (or_part90!==false) {var if_res39 = or_part90;} else {var if_res39 = M2.__gt__eq_(x78+w80,W87);}if (if_res39!==false) {vx82 = vx82*-1;var if_res40 = null;} else {var if_res40 = M2.rvoid();}if_res40;var or_part91 = M2.__lt__eq_(y79,0);if (or_part91!==false) {var if_res41 = or_part91;} else {var if_res41 = M2.__gt__eq_(y79+h81,H88);}if (if_res41!==false) {vy83 = vy83*-1;var if_res42 = null;} else {var if_res42 = M2.rvoid();}if_res42;prev84 = ts86;return M1.window.requestAnimationFrame(frame85);};return M1.window.requestAnimationFrame(frame85);};var cl43 = function(pic_name92) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return on_game_end66(pic_name92,0,0,0.3,0.3);};var cl44 = function(pic_name93, start_x94, start_y95, vx_default96, vy_default697) {if (arguments.length!==5) {throw $rjs_core.racketContractError("arity mismatch");} else {}return on_game_end66(pic_name93,start_x94,start_y95,vx_default96,vy_default697);};var cl45 = function(pic_name98, start_x99, start_y100, vx_default5101) {if (arguments.length!==4) {throw $rjs_core.racketContractError("arity mismatch");} else {}return on_game_end66(pic_name98,start_x99,start_y100,vx_default5101,0.3);};var cl46 = function(pic_name102, start_x103, start_y4104) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}return on_game_end66(pic_name102,start_x103,start_y4104,0.3,0.3);};var cl47 = function(pic_name105, start_x3106) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return on_game_end66(pic_name105,start_x3106,0,0.3,0.3);};var on_game_end = $rjs_core.attachProcedureArity(function() {var fixed_lam48 = {'1':cl43,'5':cl44,'4':cl45,'3':cl46,'2':cl47}[arguments.length];if (fixed_lam48!==undefined) {return fixed_lam48.apply(null,arguments);} else {return M2.error($rjs_core.UString.make("case-lambda: invalid case"));}},[1,2,3,4,5]);var __rjs_quoted__ = {};export { __rjs_quoted__ };