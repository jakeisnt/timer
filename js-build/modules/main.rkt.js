import * as $rjs_core from '../runtime/core.js';import * as M0 from "../links/racketscript-compiler/racketscript/interop.rkt.js";import * as M1 from "../links/racketscript-compiler/racketscript/browser.rkt.js";import * as M2 from "../runtime/kernel.rkt.js";import * as M3 from "../collects/racket/private/pre-base.rkt.js";import * as M4 from "../runtime/read.rkt.js";import * as M5 from "../links/racketscript-compiler/racketscript/private/interop.rkt.js";var MINS_PARAM = $rjs_core.UString.make("mins");var SECS_PARAM = $rjs_core.UString.make("secs");var FLIP_PARAM = $rjs_core.UString.make("flip");var DEFAULT_SECS = 300;var screen_width = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}var or_part1 = M1.document.documentElement.clientWidth;if (or_part1!==false) {var if_res2 = or_part1;} else {var or_part2 = M1.document.body.clientWidth;if (or_part2!==false) {var if_res1 = or_part2;} else {var if_res1 = M1.window.innerWidth;}var if_res2 = if_res1;}return if_res2;};var screen_height = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}var or_part3 = M1.document.documentElement.clientHeight;if (or_part3!==false) {var if_res4 = or_part3;} else {var or_part4 = M1.document.body.clientHeight;if (or_part4!==false) {var if_res3 = or_part4;} else {var if_res3 = M1.window.innerHeight;}var if_res4 = if_res3;}return if_res4;};var cur_performance = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return performance.now();};var get_query_param = function(param_name5) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var query_string6 = M1.window.location.search;var urlparams7 = new URLSearchParams(query_string6);return urlparams7.get(param_name5);};var get_elem_by_id = function(id8) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M1.document.getElementById(M0.js_string(id8));};var set_elem_bang_ = function(elem9, body10) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}elem9.innerHTML = body10;return null;};var set_elem_by_id_bang_ = function(id11, val12) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var el13 = M1.document.getElementById(M0.js_string(id11));return set_elem_bang_(el13,M0.js_string(val12));};var create_elem = function(tagname14) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M1.document.createElement(M0.js_string(tagname14));};var add_img = function(path15) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var img16 = create_elem($rjs_core.UString.make("img"));img16.src = path15;return img16;};var pad_str = function(s17) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return s17;};var sanitize_number = function(n18) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M2.string__gt_number(M0.js_string__gt_string(n18));};var minutes__gt_seconds = function(tm19) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M0.js_string(tm19)*60;};var seconds__gt_mins_plus_secs = function(secs20) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var minutes21 = M2.floor(secs20/60);var seconds22 = M2.floor(secs20-(minutes21*60));return M2.values(minutes21,seconds22);};var now = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return new Date;};var get_stop_time = function(num_secs23) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var cur_time24 = now();cur_time24.setSeconds(cur_time24.getSeconds()+num_secs23);return cur_time24;};var seconds_left = function(goal25, cur_time26) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M2.floor((goal25-cur_time26)/1000);};var mins_secs_diff = function(goal27, cur_time28) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return seconds__gt_mins_plus_secs(seconds_left(goal27,cur_time28));};var no_diff_p = function(goal29, curr_time30) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M2.__eq_(0,seconds_left(goal29,curr_time30));};var get_time_between31 = function(goal_time332, cur_time433, flip134, max_time235) {if (arguments.length!==4) {throw $rjs_core.racketContractError("arity mismatch");} else {}var goal_time36 = goal_time332;var cur_time37 = cur_time433;if (false!==false) {var if_res5 = false;} else {var if_res5 = flip134;}var flip38 = if_res5;if (false!==false) {var if_res6 = 0;} else {var if_res6 = max_time235;}var max_time39 = if_res6;var secs_left40 = seconds_left(goal_time36,cur_time37);if (flip38!==false) {var if_res7 = seconds__gt_mins_plus_secs(max_time39-secs_left40);} else {var if_res7 = seconds__gt_mins_plus_secs(secs_left40);}return if_res7;};var cl8 = function(goal_time41, cur_time42) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return get_time_between31(goal_time41,cur_time42,false,0);};var cl9 = function(goal_time43, cur_time44, flip45, max_time246) {if (arguments.length!==4) {throw $rjs_core.racketContractError("arity mismatch");} else {}return get_time_between31(goal_time43,cur_time44,flip45,max_time246);};var cl10 = function(goal_time47, cur_time48, flip149) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}return get_time_between31(goal_time47,cur_time48,flip149,0);};var get_time_between = $rjs_core.attachProcedureArity(function() {var fixed_lam11 = {'2':cl8,'4':cl9,'3':cl10}[arguments.length];if (fixed_lam11!==undefined) {return fixed_lam11.apply(null,arguments);} else {return M2.error($rjs_core.UString.make("case-lambda: invalid case"));}},[2,3,4]);var get_seconds = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}var mb_param50 = get_query_param(MINS_PARAM);var ms_param51 = get_query_param(SECS_PARAM);if (M2.not(M2.void_p(mb_param50))!==false) {var if_res12 = M2.not(M2.void_p(ms_param51));} else {var if_res12 = false;}if (if_res12!==false) {var if_res15 = minutes__gt_seconds(sanitize_number(mb_param50))+sanitize_number(ms_param51);} else {if (M2.not(M2.void_p(mb_param50))!==false) {var if_res14 = minutes__gt_seconds(sanitize_number(mb_param50));} else {if (M2.not(M2.void_p(ms_param51))!==false) {var if_res13 = sanitize_number(ms_param51);} else {var if_res13 = DEFAULT_SECS;}var if_res14 = if_res13;}var if_res15 = if_res14;}return if_res15;};var should_flip = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M2.equal_p($rjs_core.UString.make("t"),get_query_param(FLIP_PARAM));};var START_TIME = get_seconds();var TIME_LEFT = START_TIME;var TIMER = false;var FLIP = should_flip();var set_timer_bang_ = function(goal_time52, cur_time53) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var let_result16 = get_time_between(goal_time52,cur_time53,FLIP,START_TIME);var mins54 = let_result16.getAt(0);var secs55 = let_result16.getAt(1);TIME_LEFT = seconds_left(goal_time52,cur_time53);if (M2.__eq_(mins54,1)!==false) {var if_res17 = set_elem_by_id_bang_($rjs_core.UString.make("mins-label"),$rjs_core.UString.make("minute"));} else {var if_res17 = set_elem_by_id_bang_($rjs_core.UString.make("mins-label"),$rjs_core.UString.make("minutes"));}if_res17;if (M2.__eq_(secs55,1)!==false) {var if_res18 = set_elem_by_id_bang_($rjs_core.UString.make("secs-label"),$rjs_core.UString.make("second"));} else {var if_res18 = set_elem_by_id_bang_($rjs_core.UString.make("secs-label"),$rjs_core.UString.make("seconds"));}if_res18;set_elem_by_id_bang_($rjs_core.UString.make("minutes"),pad_str(mins54));return set_elem_by_id_bang_($rjs_core.UString.make("seconds"),pad_str(secs55));};var start_timer56 = function(tm657, timeout558) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var tm59 = tm657;if (false!==false) {var if_res19 = 100;} else {var if_res19 = timeout558;}var timeout60 = if_res19;start_button.innerHTML = $rjs_core.UString.make("pause");var let_result20 = M2.values();var goal_time61 = get_stop_time(1+tm59);var interval_fn62 = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}var cur_time64 = now();set_timer_bang_(goal_time61,cur_time64);if (no_diff_p(goal_time61,cur_time64)!==false) {var if_res21 = on_game_end_bang_(interval63);} else {var if_res21 = M2.rvoid();}return if_res21;};var interval63 = setInterval(interval_fn62,timeout60);TIMER = interval63;return interval63;};var cl22 = function(tm65) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return start_timer56(tm65,100);};var cl23 = function(tm66, timeout567) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return start_timer56(tm66,timeout567);};var start_timer = $rjs_core.attachProcedureArity(function() {var fixed_lam24 = {'1':cl22,'2':cl23}[arguments.length];if (fixed_lam24!==undefined) {return fixed_lam24.apply(null,arguments);} else {return M2.error($rjs_core.UString.make("case-lambda: invalid case"));}},[1,2]);var toggle_timer_bang_ = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M2.not(TIMER)!==false) {var if_res25 = M2.__eq_(TIME_LEFT,0);} else {var if_res25 = false;}if (if_res25!==false) {var if_res28 = start_timer(START_TIME);} else {if (M2.not(TIMER)!==false) {var if_res27 = start_timer(TIME_LEFT);} else {if (TIMER!==false) {var if_res26 = pause_timer_bang_(TIMER);} else {var if_res26 = start_timer(TIME_LEFT);}var if_res27 = if_res26;}var if_res28 = if_res27;}return if_res28;};var reset_timer_bang_ = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (TIMER!==false) {var if_res29 = pause_timer_bang_(TIMER);} else {var if_res29 = M2.rvoid();}if_res29;return set_initial_timer_bang_();};var set_initial_timer_bang_ = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return set_timer_bang_(get_stop_time(START_TIME),now());};var pause_timer_bang_ = function(in68) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}clearInterval(in68);start_button.innerHTML = $rjs_core.UString.make("start");TIMER = false;return null;};var flip_bang_ = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}FLIP = M2.not(FLIP);return set_timer_bang_(get_stop_time(TIME_LEFT),now());};var on_game_end_bang_ = function(in69) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}pause_timer_bang_(in69);var let_result30 = M2.values();var end70 = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M2.__eq_(0,M3.random(2))!==false) {var if_res31 = $rjs_core.UString.make("lerner.png");} else {var if_res31 = $rjs_core.UString.make("amal.png");}return on_game_end(if_res31,M3.random(screen_width()),M3.random(screen_height()),M3.random()-0.5,M3.random()-0.5);};return setInterval(end70,250);};var start_button = get_elem_by_id($rjs_core.UString.make("start-button"));start_button.onclick = function(_71) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return toggle_timer_bang_();};var reset_button = get_elem_by_id($rjs_core.UString.make("reset-button"));reset_button.onclick = function(_72) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return reset_timer_bang_();};var flip_button = get_elem_by_id($rjs_core.UString.make("flip-button"));flip_button.onclick = function(_73) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return flip_bang_();};M1.document.onkeyup = function(e74) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M2.__eq_(e74.keyCode,32)!==false) {var if_res32 = toggle_timer_bang_();} else {var if_res32 = M2.rvoid();}return if_res32;};set_initial_timer_bang_();var on_game_end75 = function(pic_name1176, start_x777, start_y878, vx_default979, vy_default1080) {if (arguments.length!==5) {throw $rjs_core.racketContractError("arity mismatch");} else {}var pic_name81 = pic_name1176;if (false!==false) {var if_res33 = 0;} else {var if_res33 = start_x777;}var start_x82 = if_res33;if (false!==false) {var if_res34 = 0;} else {var if_res34 = start_y878;}var start_y83 = if_res34;if (false!==false) {var if_res35 = 0.3;} else {var if_res35 = vx_default979;}var vx_default84 = if_res35;if (false!==false) {var if_res36 = 0.3;} else {var if_res36 = vy_default1080;}var vy_default85 = if_res36;var img86 = add_img(pic_name81);img86.style.position = $rjs_core.UString.make("absolute");var let_result37 = M2.values();img86.style.zIndex = $rjs_core.UString.make("999");var let_result38 = M2.values();img86.style.top = $rjs_core.UString.make("0");var let_result39 = M2.values();img86.style.left = $rjs_core.UString.make("0");var let_result40 = M2.values();M1.document.body.appendChild(img86);var let_result41 = M2.values();var x87 = start_x82;var y88 = start_y83;var w89 = 100;var h90 = 100;var vx91 = vx_default84;var vy92 = vy_default85;var prev93 = cur_performance();var frame94 = function(ts95) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var W96 = screen_width();var H97 = screen_height();var dt98 = ts95-prev93;x87 = M2.max(0,M2.min(W96-w89,x87+(dt98*vx91)));y88 = M2.max(0,M2.min(H97-h90,y88+(dt98*vy92)));img86.style.transform = M0.js_string(M2.string_append($rjs_core.UString.make("translate("),M2.number__gt_string(x87),$rjs_core.UString.make("px, "),M2.number__gt_string(y88),$rjs_core.UString.make("px)")));var or_part99 = M2.__lt__eq_(x87,0);if (or_part99!==false) {var if_res42 = or_part99;} else {var if_res42 = M2.__gt__eq_(x87+w89,W96);}if (if_res42!==false) {vx91 = vx91*-1;var if_res43 = null;} else {var if_res43 = M2.rvoid();}if_res43;var or_part100 = M2.__lt__eq_(y88,0);if (or_part100!==false) {var if_res44 = or_part100;} else {var if_res44 = M2.__gt__eq_(y88+h90,H97);}if (if_res44!==false) {vy92 = vy92*-1;var if_res45 = null;} else {var if_res45 = M2.rvoid();}if_res45;prev93 = ts95;return M1.window.requestAnimationFrame(frame94);};return M1.window.requestAnimationFrame(frame94);};var cl46 = function(pic_name101) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return on_game_end75(pic_name101,0,0,0.3,0.3);};var cl47 = function(pic_name102, start_x103, start_y104, vx_default105, vy_default10106) {if (arguments.length!==5) {throw $rjs_core.racketContractError("arity mismatch");} else {}return on_game_end75(pic_name102,start_x103,start_y104,vx_default105,vy_default10106);};var cl48 = function(pic_name107, start_x108, start_y109, vx_default9110) {if (arguments.length!==4) {throw $rjs_core.racketContractError("arity mismatch");} else {}return on_game_end75(pic_name107,start_x108,start_y109,vx_default9110,0.3);};var cl49 = function(pic_name111, start_x112, start_y8113) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}return on_game_end75(pic_name111,start_x112,start_y8113,0.3,0.3);};var cl50 = function(pic_name114, start_x7115) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return on_game_end75(pic_name114,start_x7115,0,0.3,0.3);};var on_game_end = $rjs_core.attachProcedureArity(function() {var fixed_lam51 = {'1':cl46,'5':cl47,'4':cl48,'3':cl49,'2':cl50}[arguments.length];if (fixed_lam51!==undefined) {return fixed_lam51.apply(null,arguments);} else {return M2.error($rjs_core.UString.make("case-lambda: invalid case"));}},[1,2,3,4,5]);var __rjs_quoted__ = {};export { __rjs_quoted__ };