import * as $rjs_core from '../runtime/core.js';import * as M0 from "../links/racketscript-compiler/racketscript/interop.rkt.js";import * as M1 from "../links/racketscript-compiler/racketscript/browser.rkt.js";import * as M2 from "../runtime/kernel.rkt.js";import * as M3 from "../runtime/read.rkt.js";import * as M4 from "../links/racketscript-compiler/racketscript/private/interop.rkt.js";var MINS_PARAM = $rjs_core.UString.make("mins");var SECS_PARAM = $rjs_core.UString.make("secs");var DEFAULT_SECS = 300;var screen_width = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}var or_part1 = M1.document.documentElement.clientWidth;if (or_part1!==false) {var if_res2 = or_part1;} else {var or_part2 = M1.document.body.clientWidth;if (or_part2!==false) {var if_res1 = or_part2;} else {var if_res1 = M1.window.innerWidth;}var if_res2 = if_res1;}return if_res2;};var screen_height = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}var or_part3 = M1.document.documentElement.clientHeight;if (or_part3!==false) {var if_res4 = or_part3;} else {var or_part4 = M1.document.body.clientHeight;if (or_part4!==false) {var if_res3 = or_part4;} else {var if_res3 = M1.window.innerHeight;}var if_res4 = if_res3;}return if_res4;};var cur_performance = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return performance.now();};var get_query_param = function(param_name5) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var query_string6 = M1.window.location.search;var urlparams7 = new URLSearchParams(query_string6);return urlparams7.get(param_name5);};var get_elem_by_id = function(id8) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M1.document.getElementById(M0.js_string(id8));};var set_html_bang_ = function(elem9, body10) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}elem9.innerHTML = body10;return null;};var create_elem = function(tagname11) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M1.document.createElement(M0.js_string(tagname11));};var add_img = function(path12) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var img13 = create_elem($rjs_core.UString.make("img"));img13.src = path12;return img13;};var minutes__gt_seconds = function(tm14) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M0.js_string(tm14)*60;};var set_elem_bang_ = function(id15, val16) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var el17 = M1.document.getElementById(M0.js_string(id15));el17.innerHTML = M0.js_string(val16);return null;};var now = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return new Date;};var get_stop_time = function(num_secs18) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var cur_time19 = now();cur_time19.setSeconds(cur_time19.getSeconds()+num_secs18);return cur_time19;};var mins_secs_diff = function(goal20, cur_time21) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var dist22 = goal20-cur_time21;var minutes23 = M2.floor(dist22/60000);var seconds24 = M2.floor((dist22-(60000*minutes23))/1000);return M2.values(minutes23,seconds24);};var seconds_left = function(goal25, cur_time26) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var let_result5 = mins_secs_diff(goal25,cur_time26);var mins27 = let_result5.getAt(0);var secs28 = let_result5.getAt(1);return (mins27*60)+secs28;};var no_diff_p = function(goal29, curr_time30) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var let_result6 = mins_secs_diff(goal29,curr_time30);var mins31 = let_result6.getAt(0);var secs32 = let_result6.getAt(1);if (M2.__eq_(mins31,0)!==false) {var if_res7 = M2.__eq_(secs32,0);} else {var if_res7 = false;}return if_res7;};var sanitize_number = function(n33) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M2.string__gt_number(M0.js_string__gt_string(n33));};var get_seconds = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}var mb_param34 = get_query_param(MINS_PARAM);var ms_param35 = get_query_param(SECS_PARAM);if (M2.not(M2.void_p(mb_param34))!==false) {var if_res8 = M2.not(M2.void_p(ms_param35));} else {var if_res8 = false;}if (if_res8!==false) {var if_res11 = minutes__gt_seconds(sanitize_number(mb_param34))+sanitize_number(ms_param35);} else {if (M2.not(M2.void_p(mb_param34))!==false) {var if_res10 = minutes__gt_seconds(sanitize_number(mb_param34));} else {if (M2.not(M2.void_p(ms_param35))!==false) {var if_res9 = sanitize_number(ms_param35);} else {var if_res9 = DEFAULT_SECS;}var if_res10 = if_res9;}var if_res11 = if_res10;}return if_res11;};var START_TIME = get_seconds();var TIME_LEFT = START_TIME;var TIMER = false;var set_timer_bang_ = function(goal_time36, cur_time37) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var let_result12 = mins_secs_diff(goal_time36,cur_time37);var mins38 = let_result12.getAt(0);var secs39 = let_result12.getAt(1);TIME_LEFT = seconds_left(goal_time36,cur_time37);if (M2.__eq_(mins38,1)!==false) {var if_res13 = set_elem_bang_($rjs_core.UString.make("mins-label"),$rjs_core.UString.make("minute"));} else {var if_res13 = set_elem_bang_($rjs_core.UString.make("mins-label"),$rjs_core.UString.make("minutes"));}if_res13;if (M2.__eq_(secs39,1)!==false) {var if_res14 = set_elem_bang_($rjs_core.UString.make("secs-label"),$rjs_core.UString.make("second"));} else {var if_res14 = set_elem_bang_($rjs_core.UString.make("secs-label"),$rjs_core.UString.make("seconds"));}if_res14;set_elem_bang_($rjs_core.UString.make("minutes"),mins38);return set_elem_bang_($rjs_core.UString.make("seconds"),secs39);};var start_button = get_elem_by_id($rjs_core.UString.make("start-button"));var pause_timer_bang_ = function(in40) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}clearInterval(in40);start_button.innerHTML = $rjs_core.UString.make("start");TIMER = false;return null;};var set_initial_timer_bang_ = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return set_timer_bang_(get_stop_time(START_TIME),now());};var on_game_end_bang_ = function(in41) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}pause_timer_bang_(in41);on_game_end($rjs_core.UString.make("lerner.png"),-100);return on_game_end($rjs_core.UString.make("amal.png"),0,-100,0.2,0.5);};var start_timer42 = function(tm243, timeout144) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var tm45 = tm243;if (false!==false) {var if_res15 = 100;} else {var if_res15 = timeout144;}var timeout46 = if_res15;start_button.innerHTML = $rjs_core.UString.make("pause");var let_result16 = M2.values();var goal_time47 = get_stop_time(1+tm45);var interval_fn48 = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}var cur_time50 = now();set_timer_bang_(goal_time47,cur_time50);if (no_diff_p(goal_time47,cur_time50)!==false) {var if_res17 = on_game_end_bang_(interval49);} else {var if_res17 = M2.rvoid();}return if_res17;};var interval49 = setInterval(interval_fn48,timeout46);TIMER = interval49;return interval49;};var cl18 = function(tm51) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return start_timer42(tm51,100);};var cl19 = function(tm52, timeout153) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return start_timer42(tm52,timeout153);};var start_timer = $rjs_core.attachProcedureArity(function() {var fixed_lam20 = {'1':cl18,'2':cl19}[arguments.length];if (fixed_lam20!==undefined) {return fixed_lam20.apply(null,arguments);} else {return M2.error($rjs_core.UString.make("case-lambda: invalid case"));}},[1,2]);set_initial_timer_bang_();var toggle_timer_bang_ = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M2.not(TIMER)!==false) {var if_res21 = M2.__eq_(TIME_LEFT,0);} else {var if_res21 = false;}if (if_res21!==false) {var if_res24 = start_timer(START_TIME);} else {if (M2.not(TIMER)!==false) {var if_res23 = start_timer(TIME_LEFT);} else {if (TIMER!==false) {var if_res22 = pause_timer_bang_(TIMER);} else {var if_res22 = start_timer(TIME_LEFT);}var if_res23 = if_res22;}var if_res24 = if_res23;}return if_res24;};var reset_timer_bang_ = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (TIMER!==false) {var if_res25 = pause_timer_bang_(TIMER);} else {var if_res25 = M2.rvoid();}if_res25;return set_initial_timer_bang_();};start_button.onclick = function(_54) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return toggle_timer_bang_();};var reset_button = get_elem_by_id($rjs_core.UString.make("reset-button"));reset_button.onclick = function(_55) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return reset_timer_bang_();};M1.document.onkeyup = function(e56) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M2.__eq_(e56.keyCode,32)!==false) {var if_res26 = toggle_timer_bang_();} else {var if_res26 = M2.rvoid();}return if_res26;};var on_game_end57 = function(pic_name758, start_x359, start_y460, vx_default561, vy_default662) {if (arguments.length!==5) {throw $rjs_core.racketContractError("arity mismatch");} else {}var pic_name63 = pic_name758;if (false!==false) {var if_res27 = 0;} else {var if_res27 = start_x359;}var start_x64 = if_res27;if (false!==false) {var if_res28 = 0;} else {var if_res28 = start_y460;}var start_y65 = if_res28;if (false!==false) {var if_res29 = 0.3;} else {var if_res29 = vx_default561;}var vx_default66 = if_res29;if (false!==false) {var if_res30 = 0.3;} else {var if_res30 = vy_default662;}var vy_default67 = if_res30;var img68 = add_img(pic_name63);img68.style.position = $rjs_core.UString.make("absolute");var let_result31 = M2.values();img68.style.zIndex = $rjs_core.UString.make("999");var let_result32 = M2.values();img68.style.top = $rjs_core.UString.make("0");var let_result33 = M2.values();img68.style.left = $rjs_core.UString.make("0");var let_result34 = M2.values();M1.document.body.appendChild(img68);var let_result35 = M2.values();var x69 = start_x64;var y70 = start_y65;var w71 = 80;var h72 = 80;var vx73 = vx_default66;var vy74 = vy_default67;var prev75 = cur_performance();var frame76 = function(ts77) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var W78 = screen_width();var H79 = screen_height();var dt80 = ts77-prev75;x69 = M2.max(0,M2.min(W78-w71,x69+(dt80*vx73)));y70 = M2.max(0,M2.min(H79-h72,y70+(dt80*vy74)));img68.style.transform = M0.js_string(M2.string_append($rjs_core.UString.make("translate("),M2.number__gt_string(x69),$rjs_core.UString.make("px, "),M2.number__gt_string(y70),$rjs_core.UString.make("px)")));var or_part81 = M2.__lt__eq_(x69,0);if (or_part81!==false) {var if_res36 = or_part81;} else {var if_res36 = M2.__gt__eq_(x69+w71,W78);}if (if_res36!==false) {vx73 = vx73*-1;var if_res37 = null;} else {var if_res37 = M2.rvoid();}if_res37;var or_part82 = M2.__lt__eq_(y70,0);if (or_part82!==false) {var if_res38 = or_part82;} else {var if_res38 = M2.__gt__eq_(y70+h72,H79);}if (if_res38!==false) {vy74 = vy74*-1;var if_res39 = null;} else {var if_res39 = M2.rvoid();}if_res39;prev75 = ts77;return M1.window.requestAnimationFrame(frame76);};return M1.window.requestAnimationFrame(frame76);};var cl40 = function(pic_name83) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return on_game_end57(pic_name83,0,0,0.3,0.3);};var cl41 = function(pic_name84, start_x85, start_y86, vx_default87, vy_default688) {if (arguments.length!==5) {throw $rjs_core.racketContractError("arity mismatch");} else {}return on_game_end57(pic_name84,start_x85,start_y86,vx_default87,vy_default688);};var cl42 = function(pic_name89, start_x90, start_y91, vx_default592) {if (arguments.length!==4) {throw $rjs_core.racketContractError("arity mismatch");} else {}return on_game_end57(pic_name89,start_x90,start_y91,vx_default592,0.3);};var cl43 = function(pic_name93, start_x94, start_y495) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}return on_game_end57(pic_name93,start_x94,start_y495,0.3,0.3);};var cl44 = function(pic_name96, start_x397) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return on_game_end57(pic_name96,start_x397,0,0.3,0.3);};var on_game_end = $rjs_core.attachProcedureArity(function() {var fixed_lam45 = {'1':cl40,'5':cl41,'4':cl42,'3':cl43,'2':cl44}[arguments.length];if (fixed_lam45!==undefined) {return fixed_lam45.apply(null,arguments);} else {return M2.error($rjs_core.UString.make("case-lambda: invalid case"));}},[1,2,3,4,5]);var __rjs_quoted__ = {};export { __rjs_quoted__ };