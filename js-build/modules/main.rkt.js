import * as $rjs_core from '../runtime/core.js';import * as M0 from "../links/racketscript-compiler/racketscript/interop.rkt.js";import * as M1 from "../links/racketscript-compiler/racketscript/browser.rkt.js";import * as M2 from "../runtime/kernel.rkt.js";import * as M3 from "../runtime/read.rkt.js";import * as M4 from "../links/racketscript-compiler/racketscript/private/interop.rkt.js";var MINS_PARAM = $rjs_core.UString.make("mins");var SECS_PARAM = $rjs_core.UString.make("secs");var FLIP_PARAM = $rjs_core.UString.make("flip");var DEFAULT_SECS = 300;var screen_width = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}var or_part1 = M1.document.documentElement.clientWidth;if (or_part1!==false) {var if_res2 = or_part1;} else {var or_part2 = M1.document.body.clientWidth;if (or_part2!==false) {var if_res1 = or_part2;} else {var if_res1 = M1.window.innerWidth;}var if_res2 = if_res1;}return if_res2;};var screen_height = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}var or_part3 = M1.document.documentElement.clientHeight;if (or_part3!==false) {var if_res4 = or_part3;} else {var or_part4 = M1.document.body.clientHeight;if (or_part4!==false) {var if_res3 = or_part4;} else {var if_res3 = M1.window.innerHeight;}var if_res4 = if_res3;}return if_res4;};var cur_performance = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return performance.now();};var get_query_param = function(param_name5) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var query_string6 = M1.window.location.search;var urlparams7 = new URLSearchParams(query_string6);return urlparams7.get(param_name5);};var get_elem_by_id = function(id8) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M1.document.getElementById(M0.js_string(id8));};var set_elem_bang_ = function(elem9, body10) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}elem9.innerHTML = body10;return null;};var set_elem_by_id_bang_ = function(id11, val12) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var el13 = M1.document.getElementById(M0.js_string(id11));return set_elem_bang_(el13,M0.js_string(val12));};var create_elem = function(tagname14) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M1.document.createElement(M0.js_string(tagname14));};var add_img = function(path15) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var img16 = create_elem($rjs_core.UString.make("img"));img16.src = path15;return img16;};var pad_str = function(s17) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return s17;};var sanitize_number = function(n18) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M2.string__gt_number(M0.js_string__gt_string(n18));};var minutes__gt_seconds = function(tm19) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M0.js_string(tm19)*60;};var now = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return new Date;};var get_stop_time = function(num_secs20) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var cur_time21 = now();cur_time21.setSeconds(cur_time21.getSeconds()+num_secs20);return cur_time21;};var mins_secs_diff = function(goal22, cur_time23) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var dist24 = goal22-cur_time23;var minutes25 = M2.floor(dist24/60000);var seconds26 = M2.floor((dist24-(60000*minutes25))/1000);return M2.values(minutes25,seconds26);};var seconds_left = function(goal27, cur_time28) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var let_result5 = mins_secs_diff(goal27,cur_time28);var mins29 = let_result5.getAt(0);var secs30 = let_result5.getAt(1);return (mins29*60)+secs30;};var no_diff_p = function(goal31, curr_time32) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var let_result6 = mins_secs_diff(goal31,curr_time32);var mins33 = let_result6.getAt(0);var secs34 = let_result6.getAt(1);if (M2.__eq_(mins33,0)!==false) {var if_res7 = M2.__eq_(secs34,0);} else {var if_res7 = false;}return if_res7;};var get_time_between35 = function(goal_time336, cur_time437, flip138, max_time239) {if (arguments.length!==4) {throw $rjs_core.racketContractError("arity mismatch");} else {}var goal_time40 = goal_time336;var cur_time41 = cur_time437;if (false!==false) {var if_res8 = false;} else {var if_res8 = flip138;}var flip42 = if_res8;if (false!==false) {var if_res9 = 0;} else {var if_res9 = max_time239;}var max_time43 = if_res9;var let_result10 = mins_secs_diff(goal_time40,cur_time41);var mins44 = let_result10.getAt(0);var secs45 = let_result10.getAt(1);if (FLIP!==false) {var mins_start46 = M2.floor(max_time43/60);var secs_start47 = max_time43-(mins_start46*60);var if_res11 = M2.values(mins_start46-mins44,secs_start47-secs45);} else {var if_res11 = M2.values(mins44,secs45);}return if_res11;};var cl12 = function(goal_time48, cur_time49) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return get_time_between35(goal_time48,cur_time49,false,0);};var cl13 = function(goal_time50, cur_time51, flip52, max_time253) {if (arguments.length!==4) {throw $rjs_core.racketContractError("arity mismatch");} else {}return get_time_between35(goal_time50,cur_time51,flip52,max_time253);};var cl14 = function(goal_time54, cur_time55, flip156) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}return get_time_between35(goal_time54,cur_time55,flip156,0);};var get_time_between = $rjs_core.attachProcedureArity(function() {var fixed_lam15 = {'2':cl12,'4':cl13,'3':cl14}[arguments.length];if (fixed_lam15!==undefined) {return fixed_lam15.apply(null,arguments);} else {return M2.error($rjs_core.UString.make("case-lambda: invalid case"));}},[2,3,4]);var get_seconds = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}var mb_param57 = get_query_param(MINS_PARAM);var ms_param58 = get_query_param(SECS_PARAM);if (M2.not(M2.void_p(mb_param57))!==false) {var if_res16 = M2.not(M2.void_p(ms_param58));} else {var if_res16 = false;}if (if_res16!==false) {var if_res19 = minutes__gt_seconds(sanitize_number(mb_param57))+sanitize_number(ms_param58);} else {if (M2.not(M2.void_p(mb_param57))!==false) {var if_res18 = minutes__gt_seconds(sanitize_number(mb_param57));} else {if (M2.not(M2.void_p(ms_param58))!==false) {var if_res17 = sanitize_number(ms_param58);} else {var if_res17 = DEFAULT_SECS;}var if_res18 = if_res17;}var if_res19 = if_res18;}return if_res19;};var should_flip = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M2.equal_p($rjs_core.UString.make("t"),get_query_param(FLIP_PARAM));};var START_TIME = get_seconds();var TIME_LEFT = START_TIME;var TIMER = false;var FLIP = should_flip();var set_timer_bang_ = function(goal_time59, cur_time60) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var let_result20 = get_time_between(goal_time59,cur_time60,FLIP,START_TIME);var mins61 = let_result20.getAt(0);var secs62 = let_result20.getAt(1);TIME_LEFT = seconds_left(goal_time59,cur_time60);if (M2.__eq_(mins61,1)!==false) {var if_res21 = set_elem_by_id_bang_($rjs_core.UString.make("mins-label"),$rjs_core.UString.make("minute"));} else {var if_res21 = set_elem_by_id_bang_($rjs_core.UString.make("mins-label"),$rjs_core.UString.make("minutes"));}if_res21;if (M2.__eq_(secs62,1)!==false) {var if_res22 = set_elem_by_id_bang_($rjs_core.UString.make("secs-label"),$rjs_core.UString.make("second"));} else {var if_res22 = set_elem_by_id_bang_($rjs_core.UString.make("secs-label"),$rjs_core.UString.make("seconds"));}if_res22;set_elem_by_id_bang_($rjs_core.UString.make("minutes"),pad_str(mins61));return set_elem_by_id_bang_($rjs_core.UString.make("seconds"),pad_str(secs62));};var start_timer63 = function(tm664, timeout565) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var tm66 = tm664;if (false!==false) {var if_res23 = 100;} else {var if_res23 = timeout565;}var timeout67 = if_res23;start_button.innerHTML = $rjs_core.UString.make("pause");var let_result24 = M2.values();var goal_time68 = get_stop_time(1+tm66);var interval_fn69 = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}var cur_time71 = now();set_timer_bang_(goal_time68,cur_time71);if (no_diff_p(goal_time68,cur_time71)!==false) {var if_res25 = on_game_end_bang_(interval70);} else {var if_res25 = M2.rvoid();}return if_res25;};var interval70 = setInterval(interval_fn69,timeout67);TIMER = interval70;return interval70;};var cl26 = function(tm72) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return start_timer63(tm72,100);};var cl27 = function(tm73, timeout574) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return start_timer63(tm73,timeout574);};var start_timer = $rjs_core.attachProcedureArity(function() {var fixed_lam28 = {'1':cl26,'2':cl27}[arguments.length];if (fixed_lam28!==undefined) {return fixed_lam28.apply(null,arguments);} else {return M2.error($rjs_core.UString.make("case-lambda: invalid case"));}},[1,2]);var toggle_timer_bang_ = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M2.not(TIMER)!==false) {var if_res29 = M2.__eq_(TIME_LEFT,0);} else {var if_res29 = false;}if (if_res29!==false) {var if_res32 = start_timer(START_TIME);} else {if (M2.not(TIMER)!==false) {var if_res31 = start_timer(TIME_LEFT);} else {if (TIMER!==false) {var if_res30 = pause_timer_bang_(TIMER);} else {var if_res30 = start_timer(TIME_LEFT);}var if_res31 = if_res30;}var if_res32 = if_res31;}return if_res32;};var reset_timer_bang_ = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (TIMER!==false) {var if_res33 = pause_timer_bang_(TIMER);} else {var if_res33 = M2.rvoid();}if_res33;return set_initial_timer_bang_();};var set_initial_timer_bang_ = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return set_timer_bang_(get_stop_time(START_TIME),now());};var pause_timer_bang_ = function(in75) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}clearInterval(in75);start_button.innerHTML = $rjs_core.UString.make("start");TIMER = false;return null;};var flip_bang_ = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}FLIP = M2.not(FLIP);return set_timer_bang_(get_stop_time(TIME_LEFT),now());};var on_game_end_bang_ = function(in76) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}pause_timer_bang_(in76);on_game_end($rjs_core.UString.make("lerner.png"),-100);return on_game_end($rjs_core.UString.make("amal.png"),0,-100,0.2,0.5);};var start_button = get_elem_by_id($rjs_core.UString.make("start-button"));start_button.onclick = function(_77) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return toggle_timer_bang_();};var reset_button = get_elem_by_id($rjs_core.UString.make("reset-button"));reset_button.onclick = function(_78) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return reset_timer_bang_();};var flip_button = get_elem_by_id($rjs_core.UString.make("flip-button"));flip_button.onclick = function(_79) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return flip_bang_();};M1.document.onkeyup = function(e80) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M2.__eq_(e80.keyCode,32)!==false) {var if_res34 = toggle_timer_bang_();} else {var if_res34 = M2.rvoid();}return if_res34;};set_initial_timer_bang_();var on_game_end81 = function(pic_name1182, start_x783, start_y884, vx_default985, vy_default1086) {if (arguments.length!==5) {throw $rjs_core.racketContractError("arity mismatch");} else {}var pic_name87 = pic_name1182;if (false!==false) {var if_res35 = 0;} else {var if_res35 = start_x783;}var start_x88 = if_res35;if (false!==false) {var if_res36 = 0;} else {var if_res36 = start_y884;}var start_y89 = if_res36;if (false!==false) {var if_res37 = 0.3;} else {var if_res37 = vx_default985;}var vx_default90 = if_res37;if (false!==false) {var if_res38 = 0.3;} else {var if_res38 = vy_default1086;}var vy_default91 = if_res38;var img92 = add_img(pic_name87);img92.style.position = $rjs_core.UString.make("absolute");var let_result39 = M2.values();img92.style.zIndex = $rjs_core.UString.make("999");var let_result40 = M2.values();img92.style.top = $rjs_core.UString.make("0");var let_result41 = M2.values();img92.style.left = $rjs_core.UString.make("0");var let_result42 = M2.values();M1.document.body.appendChild(img92);var let_result43 = M2.values();var x93 = start_x88;var y94 = start_y89;var w95 = 100;var h96 = 100;var vx97 = vx_default90;var vy98 = vy_default91;var prev99 = cur_performance();var frame100 = function(ts101) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var W102 = screen_width();var H103 = screen_height();var dt104 = ts101-prev99;x93 = M2.max(0,M2.min(W102-w95,x93+(dt104*vx97)));y94 = M2.max(0,M2.min(H103-h96,y94+(dt104*vy98)));img92.style.transform = M0.js_string(M2.string_append($rjs_core.UString.make("translate("),M2.number__gt_string(x93),$rjs_core.UString.make("px, "),M2.number__gt_string(y94),$rjs_core.UString.make("px)")));var or_part105 = M2.__lt__eq_(x93,0);if (or_part105!==false) {var if_res44 = or_part105;} else {var if_res44 = M2.__gt__eq_(x93+w95,W102);}if (if_res44!==false) {vx97 = vx97*-1;var if_res45 = null;} else {var if_res45 = M2.rvoid();}if_res45;var or_part106 = M2.__lt__eq_(y94,0);if (or_part106!==false) {var if_res46 = or_part106;} else {var if_res46 = M2.__gt__eq_(y94+h96,H103);}if (if_res46!==false) {vy98 = vy98*-1;var if_res47 = null;} else {var if_res47 = M2.rvoid();}if_res47;prev99 = ts101;return M1.window.requestAnimationFrame(frame100);};return M1.window.requestAnimationFrame(frame100);};var cl48 = function(pic_name107) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return on_game_end81(pic_name107,0,0,0.3,0.3);};var cl49 = function(pic_name108, start_x109, start_y110, vx_default111, vy_default10112) {if (arguments.length!==5) {throw $rjs_core.racketContractError("arity mismatch");} else {}return on_game_end81(pic_name108,start_x109,start_y110,vx_default111,vy_default10112);};var cl50 = function(pic_name113, start_x114, start_y115, vx_default9116) {if (arguments.length!==4) {throw $rjs_core.racketContractError("arity mismatch");} else {}return on_game_end81(pic_name113,start_x114,start_y115,vx_default9116,0.3);};var cl51 = function(pic_name117, start_x118, start_y8119) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}return on_game_end81(pic_name117,start_x118,start_y8119,0.3,0.3);};var cl52 = function(pic_name120, start_x7121) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return on_game_end81(pic_name120,start_x7121,0,0.3,0.3);};var on_game_end = $rjs_core.attachProcedureArity(function() {var fixed_lam53 = {'1':cl48,'5':cl49,'4':cl50,'3':cl51,'2':cl52}[arguments.length];if (fixed_lam53!==undefined) {return fixed_lam53.apply(null,arguments);} else {return M2.error($rjs_core.UString.make("case-lambda: invalid case"));}},[1,2,3,4,5]);var __rjs_quoted__ = {};export { __rjs_quoted__ };