import * as $rjs_core from '../runtime/core.js';import * as M0 from "../links/racketscript-compiler/racketscript/interop.rkt.js";import * as M1 from "../links/racketscript-compiler/racketscript/browser.rkt.js";import * as M2 from "../runtime/kernel.rkt.js";import * as M3 from "../collects/racket/private/pre-base.rkt.js";import * as M4 from "../runtime/read.rkt.js";import * as M5 from "../links/racketscript-compiler/racketscript/private/interop.rkt.js";var MINS_PARAM = $rjs_core.UString.make("mins");var SECS_PARAM = $rjs_core.UString.make("secs");var FLIP_PARAM = $rjs_core.UString.make("flip");var MIN_SECS = 1;var MAX_SECS = (59*60)+59;var DEFAULT_SECS = 300;var screen_width = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}var or_part1 = M1.document.documentElement.clientWidth;if (or_part1!==false) {var if_res2 = or_part1;} else {var or_part2 = M1.document.body.clientWidth;if (or_part2!==false) {var if_res1 = or_part2;} else {var if_res1 = M1.window.innerWidth;}var if_res2 = if_res1;}return if_res2;};var screen_height = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}var or_part3 = M1.document.documentElement.clientHeight;if (or_part3!==false) {var if_res4 = or_part3;} else {var or_part4 = M1.document.body.clientHeight;if (or_part4!==false) {var if_res3 = or_part4;} else {var if_res3 = M1.window.innerHeight;}var if_res4 = if_res3;}return if_res4;};var cur_performance = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return performance.now();};var get_query_param = function(param_name5) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var query_string6 = M1.window.location.search;var urlparams7 = new URLSearchParams(query_string6);return urlparams7.get(param_name5);};var get_elem_by_id = function(id8) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M1.document.getElementById(M0.js_string(id8));};var set_elem_bang_ = function(elem9, body10) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}elem9.innerHTML = body10;return null;};var set_elem_by_id_bang_ = function(id11, val12) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var el13 = M1.document.getElementById(M0.js_string(id11));return set_elem_bang_(el13,M0.js_string(val12));};var create_elem = function(tagname14) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M1.document.createElement(M0.js_string(tagname14));};var add_img = function(path15) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var img16 = create_elem($rjs_core.UString.make("img"));img16.src = path15;return img16;};var pad_str = function(s17) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return s17;};var sanitize_number = function(n18) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M2.string_p(n18)!==false) {var if_res5 = M2.number_p(M2.string__gt_number(n18));} else {var if_res5 = false;}if (if_res5!==false) {var if_res6 = M2.floor(M2.string__gt_number(n18));} else {var if_res6 = false;}return if_res6;};var ensure_in = function(a19, b20) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return function(n21) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M2.__lt_(n21,a19)!==false) {var if_res8 = a19;} else {if (M2.__gt_(n21,b20)!==false) {var if_res7 = b20;} else {var if_res7 = n21;}var if_res8 = if_res7;}return if_res8;};};var ensure_in_secs = ensure_in(MIN_SECS,MAX_SECS);var minutes__gt_seconds = function(tm22) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M0.js_string(tm22)*60;};var seconds__gt_mins_plus_secs = function(secs23) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var minutes24 = M2.floor(secs23/60);var seconds25 = M2.floor(secs23-(minutes24*60));return M2.values(minutes24,seconds25);};var now = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return new Date;};var get_stop_time = function(num_secs26) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var cur_time27 = now();cur_time27.setSeconds(cur_time27.getSeconds()+num_secs26);return cur_time27;};var seconds_left = function(goal28, cur_time29) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M2.floor((goal28-cur_time29)/1000);};var mins_secs_diff = function(goal30, cur_time31) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return seconds__gt_mins_plus_secs(seconds_left(goal30,cur_time31));};var no_diff_p = function(goal32, curr_time33) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M2.__eq_(0,seconds_left(goal32,curr_time33));};var get_time_between34 = function(goal_time335, cur_time436, flip137, max_time238) {if (arguments.length!==4) {throw $rjs_core.racketContractError("arity mismatch");} else {}var goal_time39 = goal_time335;var cur_time40 = cur_time436;if (false!==false) {var if_res9 = false;} else {var if_res9 = flip137;}var flip41 = if_res9;if (false!==false) {var if_res10 = 0;} else {var if_res10 = max_time238;}var max_time42 = if_res10;var secs_left43 = seconds_left(goal_time39,cur_time40);if (flip41!==false) {var if_res11 = seconds__gt_mins_plus_secs(max_time42-secs_left43);} else {var if_res11 = seconds__gt_mins_plus_secs(secs_left43);}return if_res11;};var cl12 = function(goal_time44, cur_time45) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return get_time_between34(goal_time44,cur_time45,false,0);};var cl13 = function(goal_time46, cur_time47, flip48, max_time249) {if (arguments.length!==4) {throw $rjs_core.racketContractError("arity mismatch");} else {}return get_time_between34(goal_time46,cur_time47,flip48,max_time249);};var cl14 = function(goal_time50, cur_time51, flip152) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}return get_time_between34(goal_time50,cur_time51,flip152,0);};var get_time_between = $rjs_core.attachProcedureArity(function() {var fixed_lam15 = {'2':cl12,'4':cl13,'3':cl14}[arguments.length];if (fixed_lam15!==undefined) {return fixed_lam15.apply(null,arguments);} else {return M2.error($rjs_core.UString.make("case-lambda: invalid case"));}},[2,3,4]);var get_seconds_param = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return sanitize_number(get_query_param(SECS_PARAM));};var get_minutes_param = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return sanitize_number(get_query_param(MINS_PARAM));};var get_seconds = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}var mb_mins53 = get_seconds_param();var mb_secs54 = get_minutes_param();if (mb_mins53!==false) {var if_res16 = mb_secs54;} else {var if_res16 = false;}if (if_res16!==false) {var if_res19 = minutes__gt_seconds(mb_mins53)+mb_secs54;} else {if (mb_mins53!==false) {var if_res18 = minutes__gt_seconds(mb_mins53);} else {if (mb_secs54!==false) {var if_res17 = mb_secs54;} else {var if_res17 = DEFAULT_SECS;}var if_res18 = if_res17;}var if_res19 = if_res18;}return ensure_in_secs(if_res19);};var should_flip = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M2.equal_p($rjs_core.UString.make("t"),get_query_param(FLIP_PARAM));};var START_TIME = get_seconds();var TIME_LEFT = START_TIME;var TIMER = false;var FLIP = should_flip();var set_timer_bang_ = function(goal_time55, cur_time56) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var let_result20 = get_time_between(goal_time55,cur_time56,FLIP,START_TIME);var mins57 = let_result20.getAt(0);var secs58 = let_result20.getAt(1);TIME_LEFT = seconds_left(goal_time55,cur_time56);if (M2.__eq_(mins57,1)!==false) {var if_res21 = set_elem_by_id_bang_($rjs_core.UString.make("mins-label"),$rjs_core.UString.make("minute"));} else {var if_res21 = set_elem_by_id_bang_($rjs_core.UString.make("mins-label"),$rjs_core.UString.make("minutes"));}if_res21;if (M2.__eq_(secs58,1)!==false) {var if_res22 = set_elem_by_id_bang_($rjs_core.UString.make("secs-label"),$rjs_core.UString.make("second"));} else {var if_res22 = set_elem_by_id_bang_($rjs_core.UString.make("secs-label"),$rjs_core.UString.make("seconds"));}if_res22;set_elem_by_id_bang_($rjs_core.UString.make("minutes"),pad_str(mins57));return set_elem_by_id_bang_($rjs_core.UString.make("seconds"),pad_str(secs58));};var start_timer59 = function(tm660, timeout561) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var tm62 = tm660;if (false!==false) {var if_res23 = 100;} else {var if_res23 = timeout561;}var timeout63 = if_res23;start_button.innerHTML = $rjs_core.UString.make("pause");var let_result24 = M2.values();var goal_time64 = get_stop_time(1+tm62);var interval_fn65 = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}var cur_time67 = now();set_timer_bang_(goal_time64,cur_time67);if (no_diff_p(goal_time64,cur_time67)!==false) {var if_res25 = on_game_end_bang_(interval66);} else {var if_res25 = M2.rvoid();}return if_res25;};var interval66 = setInterval(interval_fn65,timeout63);TIMER = interval66;return interval66;};var cl26 = function(tm68) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return start_timer59(tm68,100);};var cl27 = function(tm69, timeout570) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return start_timer59(tm69,timeout570);};var start_timer = $rjs_core.attachProcedureArity(function() {var fixed_lam28 = {'1':cl26,'2':cl27}[arguments.length];if (fixed_lam28!==undefined) {return fixed_lam28.apply(null,arguments);} else {return M2.error($rjs_core.UString.make("case-lambda: invalid case"));}},[1,2]);var toggle_timer_bang_ = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M2.not(TIMER)!==false) {var if_res29 = M2.__eq_(TIME_LEFT,0);} else {var if_res29 = false;}if (if_res29!==false) {var if_res32 = start_timer(START_TIME);} else {if (M2.not(TIMER)!==false) {var if_res31 = start_timer(TIME_LEFT);} else {if (TIMER!==false) {var if_res30 = pause_timer_bang_(TIMER);} else {var if_res30 = start_timer(TIME_LEFT);}var if_res31 = if_res30;}var if_res32 = if_res31;}return if_res32;};var reset_timer_bang_ = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (TIMER!==false) {var if_res33 = pause_timer_bang_(TIMER);} else {var if_res33 = M2.rvoid();}if_res33;return set_initial_timer_bang_();};var set_initial_timer_bang_ = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return set_timer_bang_(get_stop_time(START_TIME),now());};var pause_timer_bang_ = function(in71) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}clearInterval(in71);start_button.innerHTML = $rjs_core.UString.make("start");TIMER = false;return null;};var flip_bang_ = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}FLIP = M2.not(FLIP);if (FLIP!==false) {flip_button.innerHTML = $rjs_core.UString.make("count down");var if_res34 = null;} else {flip_button.innerHTML = $rjs_core.UString.make("count up");var if_res34 = null;}if_res34;return set_timer_bang_(get_stop_time(TIME_LEFT),now());};var on_game_end_bang_ = function(in72) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}pause_timer_bang_(in72);var let_result35 = M2.values();var end73 = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M2.__eq_(0,M3.random(2))!==false) {var if_res36 = $rjs_core.UString.make("assets/lerner.png");} else {var if_res36 = $rjs_core.UString.make("assets/amal.png");}return on_game_end(if_res36,M3.random(screen_width()),M3.random(screen_height()),M3.random()-0.5,M3.random()-0.5);};return setInterval(end73,250);};var start_button = get_elem_by_id($rjs_core.UString.make("start-button"));start_button.onclick = function(_74) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return toggle_timer_bang_();};var reset_button = get_elem_by_id($rjs_core.UString.make("reset-button"));reset_button.onclick = function(_75) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return reset_timer_bang_();};var flip_button = get_elem_by_id($rjs_core.UString.make("flip-button"));flip_button.onclick = function(_76) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return flip_bang_();};M1.document.onkeyup = function(e77) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M2.__eq_(e77.keyCode,32)!==false) {var if_res37 = toggle_timer_bang_();} else {var if_res37 = M2.rvoid();}return if_res37;};set_initial_timer_bang_();flip_bang_();flip_bang_();var on_game_end78 = function(pic_name1179, start_x780, start_y881, vx_default982, vy_default1083) {if (arguments.length!==5) {throw $rjs_core.racketContractError("arity mismatch");} else {}var pic_name84 = pic_name1179;if (false!==false) {var if_res38 = 0;} else {var if_res38 = start_x780;}var start_x85 = if_res38;if (false!==false) {var if_res39 = 0;} else {var if_res39 = start_y881;}var start_y86 = if_res39;if (false!==false) {var if_res40 = 0.3;} else {var if_res40 = vx_default982;}var vx_default87 = if_res40;if (false!==false) {var if_res41 = 0.3;} else {var if_res41 = vy_default1083;}var vy_default88 = if_res41;var img89 = add_img(pic_name84);img89.style.position = $rjs_core.UString.make("absolute");var let_result42 = M2.values();img89.style.zIndex = $rjs_core.UString.make("999");var let_result43 = M2.values();img89.style.top = $rjs_core.UString.make("0");var let_result44 = M2.values();img89.style.left = $rjs_core.UString.make("0");var let_result45 = M2.values();M1.document.body.appendChild(img89);var let_result46 = M2.values();var x90 = start_x85;var y91 = start_y86;var w92 = 100;var h93 = 100;var vx94 = vx_default87;var vy95 = vy_default88;var prev96 = cur_performance();var frame97 = function(ts98) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var W99 = screen_width();var H100 = screen_height();var dt101 = ts98-prev96;x90 = M2.max(0,M2.min(W99-w92,x90+(dt101*vx94)));y91 = M2.max(0,M2.min(H100-h93,y91+(dt101*vy95)));img89.style.transform = M0.js_string(M2.string_append($rjs_core.UString.make("translate("),M2.number__gt_string(x90),$rjs_core.UString.make("px, "),M2.number__gt_string(y91),$rjs_core.UString.make("px)")));var or_part102 = M2.__lt__eq_(x90,0);if (or_part102!==false) {var if_res47 = or_part102;} else {var if_res47 = M2.__gt__eq_(x90+w92,W99);}if (if_res47!==false) {vx94 = vx94*-1;var if_res48 = null;} else {var if_res48 = M2.rvoid();}if_res48;var or_part103 = M2.__lt__eq_(y91,0);if (or_part103!==false) {var if_res49 = or_part103;} else {var if_res49 = M2.__gt__eq_(y91+h93,H100);}if (if_res49!==false) {vy95 = vy95*-1;var if_res50 = null;} else {var if_res50 = M2.rvoid();}if_res50;prev96 = ts98;return M1.window.requestAnimationFrame(frame97);};return M1.window.requestAnimationFrame(frame97);};var cl51 = function(pic_name104) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return on_game_end78(pic_name104,0,0,0.3,0.3);};var cl52 = function(pic_name105, start_x106, start_y107, vx_default108, vy_default10109) {if (arguments.length!==5) {throw $rjs_core.racketContractError("arity mismatch");} else {}return on_game_end78(pic_name105,start_x106,start_y107,vx_default108,vy_default10109);};var cl53 = function(pic_name110, start_x111, start_y112, vx_default9113) {if (arguments.length!==4) {throw $rjs_core.racketContractError("arity mismatch");} else {}return on_game_end78(pic_name110,start_x111,start_y112,vx_default9113,0.3);};var cl54 = function(pic_name114, start_x115, start_y8116) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}return on_game_end78(pic_name114,start_x115,start_y8116,0.3,0.3);};var cl55 = function(pic_name117, start_x7118) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return on_game_end78(pic_name117,start_x7118,0,0.3,0.3);};var on_game_end = $rjs_core.attachProcedureArity(function() {var fixed_lam56 = {'1':cl51,'5':cl52,'4':cl53,'3':cl54,'2':cl55}[arguments.length];if (fixed_lam56!==undefined) {return fixed_lam56.apply(null,arguments);} else {return M2.error($rjs_core.UString.make("case-lambda: invalid case"));}},[1,2,3,4,5]);var __rjs_quoted__ = {};export { __rjs_quoted__ };