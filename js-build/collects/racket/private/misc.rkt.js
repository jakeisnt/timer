import * as $rjs_core from '../../../runtime/core.js';import * as M0 from "../../../runtime/kernel.rkt.js";import * as M1 from "./path.rkt.js";import * as M2 from "../../../runtime/main.rkt.js";var check857 = function(x860) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.real_p(x860)!==false) {var if_res407 = M0.rvoid();} else {var if_res407 = M0.raise_argument_error($rjs_core.PrimitiveSymbol.make("rationalize"),$rjs_core.UString.make("real?"),x860);}return if_res407;};var find_between858 = function(lo861, hi862) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.integer_p(lo861)!==false) {var if_res409 = lo861;} else {var lo_int863 = M0.floor(lo861);var hi_int864 = M0.floor(hi862);if (M0.__lt_(lo_int863,hi_int864)!==false) {var if_res408 = M0.add1(lo_int863);} else {var if_res408 = lo_int863+(1/find_between858(1/(hi862-lo_int863),1/(lo861-lo_int863)));}var if_res409 = if_res408;}return if_res409;};var do_find_between859 = function(lo865, hi866) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.negative_p(lo865)!==false) {var if_res410 = M0.__(find_between858(M0.__(hi866),M0.__(lo865)));} else {var if_res410 = find_between858(lo865,hi866);}return if_res410;};var rationalize = function(x867, within868) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}check857(x867);check857(within868);var delta869 = M0.abs(within868);var lo870 = x867-delta869;var hi871 = x867+delta869;if (M0.not(M0.__eq_(x867,x867))!==false) {var if_res420 = x867;} else {var or_part872 = M0.equal_p(x867,Infinity);if (or_part872!==false) {var if_res411 = or_part872;} else {var if_res411 = M0.equal_p(x867,-Infinity);}if (if_res411!==false) {if (M0.equal_p(delta869,Infinity)!==false) {var if_res412 = NaN;} else {var if_res412 = x867;}var if_res419 = if_res412;} else {if (M0.equal_p(delta869,Infinity)!==false) {var if_res418 = 0.0;} else {if (M0.not(M0.__eq_(within868,within868))!==false) {var if_res417 = within868;} else {if (M0.__lt__eq_(lo870,0,hi871)!==false) {if (M0.exact_p(x867)!==false) {var if_res413 = 0;} else {var if_res413 = 0.0;}var if_res416 = if_res413;} else {var or_part873 = M0.__rjs_quoted__.inexact_p(lo870);if (or_part873!==false) {var if_res414 = or_part873;} else {var if_res414 = M0.__rjs_quoted__.inexact_p(hi871);}if (if_res414!==false) {var if_res415 = M0.exact__gt_inexact(do_find_between859(M0.inexact__gt_exact(lo870),M0.inexact__gt_exact(hi871)));} else {var if_res415 = do_find_between859(lo870,hi871);}var if_res416 = if_res415;}var if_res417 = if_res416;}var if_res418 = if_res417;}var if_res419 = if_res418;}var if_res420 = if_res419;}return if_res420;};var load_by_cd = function(n874) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M1.path_string_p(n874)!==false) {var if_res421 = M0.rvoid();} else {var if_res421 = M0.raise_argument_error($rjs_core.PrimitiveSymbol.make("load/cd"),$rjs_core.UString.make("path-string?"),n874);}if_res421;var let_result422 = M0.__rjs_quoted__.split_path(n874);var base875 = let_result422.getAt(0);var name876 = let_result422.getAt(1);var dir_p877 = let_result422.getAt(2);if (dir_p877!==false) {var if_res425 = M0.raise(M0.__rjs_quoted__.exn_fail_filesystem(M0.string__gt_immutable_string(M0.format($rjs_core.UString.make("load/cd: cannot open a directory: ~s"),n874)),M0.current_continuation_marks()));} else {if (M0.not(M0.path_p(base875))!==false) {var if_res424 = M2.__rjs_quoted__.load(n874);} else {if (M0.not(M0.__rjs_quoted__.directory_exists_p(base875))!==false) {var if_res423 = M0.raise(M0.__rjs_quoted__.exn_fail_filesystem(M0.string__gt_immutable_string(M0.format($rjs_core.UString.make("load/cd: directory of ~s does not exist (current directory is ~s)"),n874,M0.__rjs_quoted__.current_directory())),M0.current_continuation_marks()));} else {var if_res423 = M0.rvoid();}if_res423;var orig878 = M0.__rjs_quoted__.current_directory();var if_res424 = M0.dynamic_wind(function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M0.__rjs_quoted__.current_directory(base875);},function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M2.__rjs_quoted__.load(name876);},function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M0.__rjs_quoted__.current_directory(orig878);});}var if_res425 = if_res424;}return if_res425;};var __load = function(load879, name880, path881) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M1.path_string_p(path881)!==false) {var if_res426 = M0.rvoid();} else {var if_res426 = M0.raise_argument_error(name880,$rjs_core.UString.make("path-string?"),path881);}if_res426;if (M0.__rjs_quoted__.complete_path_p(path881)!==false) {var if_res428 = load879(path881);} else {var dir882 = M0.__rjs_quoted__.current_load_relative_directory();if (dir882!==false) {var if_res427 = M0.__rjs_quoted__.path__gt_complete_path(path881,dir882);} else {var if_res427 = path881;}var if_res428 = load879(if_res427);}return if_res428;};var load_relative = function(path883) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return __load(M2.__rjs_quoted__.load,$rjs_core.PrimitiveSymbol.make("load-relative"),path883);};var load_relative_extension = function(path884) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return __load(M2.__rjs_quoted__.load_extension,$rjs_core.PrimitiveSymbol.make("load-relative-extension"),path884);};var let_result429 = M0.make_struct_type($rjs_core.PrimitiveSymbol.make("evt"),false,1,0,false,M0.list(M0.cons(M0.prop_evt,0)),M0.current_inspector(),false,$rjs_core.Pair.makeList(0));var struct_guard = let_result429.getAt(0);var make_guard = let_result429.getAt(1);var guard_p = let_result429.getAt(2);var guard_ref = let_result429.getAt(3);var guard_set_bang_ = let_result429.getAt(4);var guard_evt = function(proc885) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.procedure_p(proc885)!==false) {var if_res430 = M0.procedure_arity_includes_p(proc885,0);} else {var if_res430 = false;}if (if_res430!==false) {var if_res431 = M0.rvoid();} else {var if_res431 = M0.raise_argument_error($rjs_core.PrimitiveSymbol.make("guard-evt"),$rjs_core.UString.make("(any/c . -> . evt?)"),proc885);}if_res431;return make_guard(function(self886) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return proc885();});};var channel_get = function(ch887) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.__rjs_quoted__.channel_p(ch887)!==false) {var if_res432 = M0.rvoid();} else {var if_res432 = M0.raise_argument_error($rjs_core.PrimitiveSymbol.make("channel-get"),$rjs_core.UString.make("channel?"),ch887);}if_res432;return M0.__rjs_quoted__.sync(ch887);};var channel_try_get = function(ch888) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.__rjs_quoted__.channel_p(ch888)!==false) {var if_res433 = M0.rvoid();} else {var if_res433 = M0.raise_argument_error($rjs_core.PrimitiveSymbol.make("channel-try-get"),$rjs_core.UString.make("channel?"),ch888);}if_res433;return M0.__rjs_quoted__.sync_by_timeout(0,ch888);};var channel_put = function(ch889, val890) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.__rjs_quoted__.channel_p(ch889)!==false) {var if_res434 = M0.rvoid();} else {var if_res434 = M0.raise_argument_error($rjs_core.PrimitiveSymbol.make("channel-put"),$rjs_core.UString.make("channel?"),ch889);}if_res434;if (M0.__rjs_quoted__.sync(M0.__rjs_quoted__.channel_put_evt(ch889,val890))!==false) {var if_res435 = M0.rvoid();} else {var if_res435 = false;}return if_res435;};var port_p = function(x891) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var or_part892 = M0.input_port_p(x891);if (or_part892!==false) {var if_res436 = or_part892;} else {var if_res436 = M0.output_port_p(x891);}return if_res436;};var cl437 = function(v893) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return writeln(v893,M0.current_output_port());};var cl438 = function(v894, p895) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.output_port_p(p895)!==false) {var if_res440 = M0.rvoid();} else {var if_res440 = M0.raise_argument_error($rjs_core.PrimitiveSymbol.make("writeln"),$rjs_core.UString.make("output-port?"),1,v894,p895);}if_res440;M0.write(v894,p895);return M0.newline(p895);};var writeln = $rjs_core.attachProcedureArity(function() {var fixed_lam439 = {'1':cl437,'2':cl438}[arguments.length];if (fixed_lam439!==undefined) {return fixed_lam439.apply(null,arguments);} else {return M0.error($rjs_core.UString.make("case-lambda: invalid case"));}},[1,2]);var cl441 = function(v896) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return displayln(v896,M0.current_output_port());};var cl442 = function(v897, p898) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.output_port_p(p898)!==false) {var if_res444 = M0.rvoid();} else {var if_res444 = M0.raise_argument_error($rjs_core.PrimitiveSymbol.make("displayln"),$rjs_core.UString.make("output-port?"),1,v897,p898);}if_res444;M0.display(v897,p898);return M0.newline(p898);};var displayln = $rjs_core.attachProcedureArity(function() {var fixed_lam443 = {'1':cl441,'2':cl442}[arguments.length];if (fixed_lam443!==undefined) {return fixed_lam443.apply(null,arguments);} else {return M0.error($rjs_core.UString.make("case-lambda: invalid case"));}},[1,2]);var cl445 = function(v899) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return println(v899,M0.current_output_port(),0);};var cl446 = function(v900, p901) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return println(v900,p901,0);};var cl447 = function(v902, p903, d904) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.output_port_p(p903)!==false) {var if_res449 = M0.rvoid();} else {var if_res449 = M0.raise_argument_error($rjs_core.PrimitiveSymbol.make("println"),$rjs_core.UString.make("output-port?"),1,v902,p903,d904);}if_res449;if (M0.number_p(d904)!==false) {var or_part905 = M0.__eq_(0,d904);if (or_part905!==false) {var if_res450 = or_part905;} else {var if_res450 = M0.__eq_(d904,1);}var if_res451 = if_res450;} else {var if_res451 = false;}if (if_res451!==false) {var if_res452 = M0.rvoid();} else {var if_res452 = M0.raise_argument_error($rjs_core.PrimitiveSymbol.make("println"),$rjs_core.UString.make("(or/c 0 1)"),2,v902,p903,d904);}if_res452;M0.print(v902,p903,d904);return M0.newline(p903);};var println = $rjs_core.attachProcedureArity(function() {var fixed_lam448 = {'1':cl445,'2':cl446,'3':cl447}[arguments.length];if (fixed_lam448!==undefined) {return fixed_lam448.apply(null,arguments);} else {return M0.error($rjs_core.UString.make("case-lambda: invalid case"));}},[1,2,3]);var string_no_nuls_p = function(s906) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.string_p(s906)!==false) {var if_res453 = M0.not(M0.__rjs_quoted__.regexp_match_p("/\u0000/",s906));} else {var if_res453 = false;}return if_res453;};var bytes_environment_variable_name_p = function(s907) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.bytes_p(s907)!==false) {if (M0.eq_p($rjs_core.PrimitiveSymbol.make("windows"),M0.system_type())!==false) {var if_res454 = M0.__rjs_quoted__.regexp_match_p("/^[^\u0000=]+$/",s907);} else {var if_res454 = M0.__rjs_quoted__.regexp_match_p("/^[^\u0000=]*$/",s907);}var if_res455 = if_res454;} else {var if_res455 = false;}return if_res455;};var string_environment_variable_name_p = function(s908) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.string_p(s908)!==false) {var if_res456 = bytes_environment_variable_name_p(M0.__rjs_quoted__.string__gt_bytes_by_locale(s908,M0.char__gt_integer($rjs_core.Char.charFromCodepoint(63))));} else {var if_res456 = false;}return if_res456;};var getenv = function(s909) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (string_environment_variable_name_p(s909)!==false) {var if_res457 = M0.rvoid();} else {var if_res457 = M0.raise_argument_error($rjs_core.PrimitiveSymbol.make("getenv"),$rjs_core.UString.make("string-environment-variable-name?"),s909);}if_res457;var v910 = M0.environment_variables_ref(M0.current_environment_variables(),M0.__rjs_quoted__.string__gt_bytes_by_locale(s909,M0.char__gt_integer($rjs_core.Char.charFromCodepoint(63))));if (v910!==false) {var if_res458 = M0.__rjs_quoted__.bytes__gt_string_by_locale(v910,$rjs_core.Char.charFromCodepoint(63));} else {var if_res458 = false;}return if_res458;};var putenv = function(s911, t912) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (string_no_nuls_p(s911)!==false) {var if_res459 = M0.rvoid();} else {var if_res459 = M0.raise_argument_error($rjs_core.PrimitiveSymbol.make("putenv"),$rjs_core.UString.make("string-environment-variable-name?"),0,s911,t912);}if_res459;if (string_no_nuls_p(t912)!==false) {var if_res460 = M0.rvoid();} else {var if_res460 = M0.raise_argument_error($rjs_core.PrimitiveSymbol.make("putenv"),$rjs_core.UString.make("string-no-nuls?"),1,s911,t912);}if_res460;if (M0.environment_variables_set_bang_(M0.current_environment_variables(),M0.__rjs_quoted__.string__gt_bytes_by_locale(s911,M0.char__gt_integer($rjs_core.Char.charFromCodepoint(63))),M0.__rjs_quoted__.string__gt_bytes_by_locale(t912,M0.char__gt_integer($rjs_core.Char.charFromCodepoint(63))),function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return false;})!==false) {var if_res461 = true;} else {var if_res461 = false;}return if_res461;};var __rjs_quoted__ = {};export { __rjs_quoted__,putenv,getenv,string_environment_variable_name_p,bytes_environment_variable_name_p,println,displayln,writeln,port_p,channel_put,channel_try_get,channel_get,guard_evt,load_relative_extension,load_relative,load_by_cd,rationalize };