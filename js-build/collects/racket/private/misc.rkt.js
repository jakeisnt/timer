import * as $rjs_core from '../../../runtime/core.js';import * as M0 from "../../../runtime/kernel.rkt.js";import * as M1 from "./path.rkt.js";import * as M2 from "../../../runtime/main.rkt.js";var check876 = function(x879) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.real_p(x879)!==false) {var if_res418 = M0.rvoid();} else {var if_res418 = M0.raise_argument_error($rjs_core.PrimitiveSymbol.make("rationalize"),$rjs_core.UString.make("real?"),x879);}return if_res418;};var find_between877 = function(lo880, hi881) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.integer_p(lo880)!==false) {var if_res420 = lo880;} else {var lo_int882 = M0.floor(lo880);var hi_int883 = M0.floor(hi881);if (M0.__lt_(lo_int882,hi_int883)!==false) {var if_res419 = M0.add1(lo_int882);} else {var if_res419 = lo_int882+(1/find_between877(1/(hi881-lo_int882),1/(lo880-lo_int882)));}var if_res420 = if_res419;}return if_res420;};var do_find_between878 = function(lo884, hi885) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.negative_p(lo884)!==false) {var if_res421 = M0.__(find_between877(M0.__(hi885),M0.__(lo884)));} else {var if_res421 = find_between877(lo884,hi885);}return if_res421;};var rationalize = function(x886, within887) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}check876(x886);check876(within887);var delta888 = M0.abs(within887);var lo889 = x886-delta888;var hi890 = x886+delta888;if (M0.not(M0.__eq_(x886,x886))!==false) {var if_res431 = x886;} else {var or_part891 = M0.equal_p(x886,Infinity);if (or_part891!==false) {var if_res422 = or_part891;} else {var if_res422 = M0.equal_p(x886,-Infinity);}if (if_res422!==false) {if (M0.equal_p(delta888,Infinity)!==false) {var if_res423 = NaN;} else {var if_res423 = x886;}var if_res430 = if_res423;} else {if (M0.equal_p(delta888,Infinity)!==false) {var if_res429 = 0.0;} else {if (M0.not(M0.__eq_(within887,within887))!==false) {var if_res428 = within887;} else {if (M0.__lt__eq_(lo889,0,hi890)!==false) {if (M0.exact_p(x886)!==false) {var if_res424 = 0;} else {var if_res424 = 0.0;}var if_res427 = if_res424;} else {var or_part892 = M0.__rjs_quoted__.inexact_p(lo889);if (or_part892!==false) {var if_res425 = or_part892;} else {var if_res425 = M0.__rjs_quoted__.inexact_p(hi890);}if (if_res425!==false) {var if_res426 = M0.exact__gt_inexact(do_find_between878(M0.inexact__gt_exact(lo889),M0.inexact__gt_exact(hi890)));} else {var if_res426 = do_find_between878(lo889,hi890);}var if_res427 = if_res426;}var if_res428 = if_res427;}var if_res429 = if_res428;}var if_res430 = if_res429;}var if_res431 = if_res430;}return if_res431;};var load_by_cd = function(n893) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M1.path_string_p(n893)!==false) {var if_res432 = M0.rvoid();} else {var if_res432 = M0.raise_argument_error($rjs_core.PrimitiveSymbol.make("load/cd"),$rjs_core.UString.make("path-string?"),n893);}if_res432;var let_result433 = M0.__rjs_quoted__.split_path(n893);var base894 = let_result433.getAt(0);var name895 = let_result433.getAt(1);var dir_p896 = let_result433.getAt(2);if (dir_p896!==false) {var if_res436 = M0.raise(M0.__rjs_quoted__.exn_fail_filesystem(M0.string__gt_immutable_string(M0.format($rjs_core.UString.make("load/cd: cannot open a directory: ~s"),n893)),M0.current_continuation_marks()));} else {if (M0.not(M0.path_p(base894))!==false) {var if_res435 = M2.__rjs_quoted__.load(n893);} else {if (M0.not(M0.__rjs_quoted__.directory_exists_p(base894))!==false) {var if_res434 = M0.raise(M0.__rjs_quoted__.exn_fail_filesystem(M0.string__gt_immutable_string(M0.format($rjs_core.UString.make("load/cd: directory of ~s does not exist (current directory is ~s)"),n893,M0.__rjs_quoted__.current_directory())),M0.current_continuation_marks()));} else {var if_res434 = M0.rvoid();}if_res434;var orig897 = M0.__rjs_quoted__.current_directory();var if_res435 = M0.dynamic_wind(function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M0.__rjs_quoted__.current_directory(base894);},function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M2.__rjs_quoted__.load(name895);},function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M0.__rjs_quoted__.current_directory(orig897);});}var if_res436 = if_res435;}return if_res436;};var __load = function(load898, name899, path900) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M1.path_string_p(path900)!==false) {var if_res437 = M0.rvoid();} else {var if_res437 = M0.raise_argument_error(name899,$rjs_core.UString.make("path-string?"),path900);}if_res437;if (M0.__rjs_quoted__.complete_path_p(path900)!==false) {var if_res439 = load898(path900);} else {var dir901 = M0.__rjs_quoted__.current_load_relative_directory();if (dir901!==false) {var if_res438 = M0.__rjs_quoted__.path__gt_complete_path(path900,dir901);} else {var if_res438 = path900;}var if_res439 = load898(if_res438);}return if_res439;};var load_relative = function(path902) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return __load(M2.__rjs_quoted__.load,$rjs_core.PrimitiveSymbol.make("load-relative"),path902);};var load_relative_extension = function(path903) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return __load(M2.__rjs_quoted__.load_extension,$rjs_core.PrimitiveSymbol.make("load-relative-extension"),path903);};var let_result440 = M0.make_struct_type($rjs_core.PrimitiveSymbol.make("evt"),false,1,0,false,M0.list(M0.cons(M0.prop_evt,0)),M0.current_inspector(),false,$rjs_core.Pair.makeList(0));var struct_guard = let_result440.getAt(0);var make_guard = let_result440.getAt(1);var guard_p = let_result440.getAt(2);var guard_ref = let_result440.getAt(3);var guard_set_bang_ = let_result440.getAt(4);var guard_evt = function(proc904) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.procedure_p(proc904)!==false) {var if_res441 = M0.procedure_arity_includes_p(proc904,0);} else {var if_res441 = false;}if (if_res441!==false) {var if_res442 = M0.rvoid();} else {var if_res442 = M0.raise_argument_error($rjs_core.PrimitiveSymbol.make("guard-evt"),$rjs_core.UString.make("(any/c . -> . evt?)"),proc904);}if_res442;return make_guard(function(self905) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return proc904();});};var channel_get = function(ch906) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.__rjs_quoted__.channel_p(ch906)!==false) {var if_res443 = M0.rvoid();} else {var if_res443 = M0.raise_argument_error($rjs_core.PrimitiveSymbol.make("channel-get"),$rjs_core.UString.make("channel?"),ch906);}if_res443;return M0.__rjs_quoted__.sync(ch906);};var channel_try_get = function(ch907) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.__rjs_quoted__.channel_p(ch907)!==false) {var if_res444 = M0.rvoid();} else {var if_res444 = M0.raise_argument_error($rjs_core.PrimitiveSymbol.make("channel-try-get"),$rjs_core.UString.make("channel?"),ch907);}if_res444;return M0.__rjs_quoted__.sync_by_timeout(0,ch907);};var channel_put = function(ch908, val909) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.__rjs_quoted__.channel_p(ch908)!==false) {var if_res445 = M0.rvoid();} else {var if_res445 = M0.raise_argument_error($rjs_core.PrimitiveSymbol.make("channel-put"),$rjs_core.UString.make("channel?"),ch908);}if_res445;if (M0.__rjs_quoted__.sync(M0.__rjs_quoted__.channel_put_evt(ch908,val909))!==false) {var if_res446 = M0.rvoid();} else {var if_res446 = false;}return if_res446;};var port_p = function(x910) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var or_part911 = M0.input_port_p(x910);if (or_part911!==false) {var if_res447 = or_part911;} else {var if_res447 = M0.output_port_p(x910);}return if_res447;};var cl448 = function(v912) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return writeln(v912,M0.current_output_port());};var cl449 = function(v913, p914) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.output_port_p(p914)!==false) {var if_res451 = M0.rvoid();} else {var if_res451 = M0.raise_argument_error($rjs_core.PrimitiveSymbol.make("writeln"),$rjs_core.UString.make("output-port?"),1,v913,p914);}if_res451;M0.write(v913,p914);return M0.newline(p914);};var writeln = $rjs_core.attachProcedureArity(function() {var fixed_lam450 = {'1':cl448,'2':cl449}[arguments.length];if (fixed_lam450!==undefined) {return fixed_lam450.apply(null,arguments);} else {return M0.error($rjs_core.UString.make("case-lambda: invalid case"));}},[1,2]);var cl452 = function(v915) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return displayln(v915,M0.current_output_port());};var cl453 = function(v916, p917) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.output_port_p(p917)!==false) {var if_res455 = M0.rvoid();} else {var if_res455 = M0.raise_argument_error($rjs_core.PrimitiveSymbol.make("displayln"),$rjs_core.UString.make("output-port?"),1,v916,p917);}if_res455;M0.display(v916,p917);return M0.newline(p917);};var displayln = $rjs_core.attachProcedureArity(function() {var fixed_lam454 = {'1':cl452,'2':cl453}[arguments.length];if (fixed_lam454!==undefined) {return fixed_lam454.apply(null,arguments);} else {return M0.error($rjs_core.UString.make("case-lambda: invalid case"));}},[1,2]);var cl456 = function(v918) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return println(v918,M0.current_output_port(),0);};var cl457 = function(v919, p920) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return println(v919,p920,0);};var cl458 = function(v921, p922, d923) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.output_port_p(p922)!==false) {var if_res460 = M0.rvoid();} else {var if_res460 = M0.raise_argument_error($rjs_core.PrimitiveSymbol.make("println"),$rjs_core.UString.make("output-port?"),1,v921,p922,d923);}if_res460;if (M0.number_p(d923)!==false) {var or_part924 = M0.__eq_(0,d923);if (or_part924!==false) {var if_res461 = or_part924;} else {var if_res461 = M0.__eq_(d923,1);}var if_res462 = if_res461;} else {var if_res462 = false;}if (if_res462!==false) {var if_res463 = M0.rvoid();} else {var if_res463 = M0.raise_argument_error($rjs_core.PrimitiveSymbol.make("println"),$rjs_core.UString.make("(or/c 0 1)"),2,v921,p922,d923);}if_res463;M0.print(v921,p922,d923);return M0.newline(p922);};var println = $rjs_core.attachProcedureArity(function() {var fixed_lam459 = {'1':cl456,'2':cl457,'3':cl458}[arguments.length];if (fixed_lam459!==undefined) {return fixed_lam459.apply(null,arguments);} else {return M0.error($rjs_core.UString.make("case-lambda: invalid case"));}},[1,2,3]);var string_no_nuls_p = function(s925) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.string_p(s925)!==false) {var if_res464 = M0.not(M0.__rjs_quoted__.regexp_match_p("/\u0000/",s925));} else {var if_res464 = false;}return if_res464;};var bytes_environment_variable_name_p = function(s926) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.bytes_p(s926)!==false) {if (M0.eq_p($rjs_core.PrimitiveSymbol.make("windows"),M0.system_type())!==false) {var if_res465 = M0.__rjs_quoted__.regexp_match_p("/^[^\u0000=]+$/",s926);} else {var if_res465 = M0.__rjs_quoted__.regexp_match_p("/^[^\u0000=]*$/",s926);}var if_res466 = if_res465;} else {var if_res466 = false;}return if_res466;};var string_environment_variable_name_p = function(s927) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.string_p(s927)!==false) {var if_res467 = bytes_environment_variable_name_p(M0.__rjs_quoted__.string__gt_bytes_by_locale(s927,M0.char__gt_integer($rjs_core.Char.charFromCodepoint(63))));} else {var if_res467 = false;}return if_res467;};var getenv = function(s928) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (string_environment_variable_name_p(s928)!==false) {var if_res468 = M0.rvoid();} else {var if_res468 = M0.raise_argument_error($rjs_core.PrimitiveSymbol.make("getenv"),$rjs_core.UString.make("string-environment-variable-name?"),s928);}if_res468;var v929 = M0.environment_variables_ref(M0.current_environment_variables(),M0.__rjs_quoted__.string__gt_bytes_by_locale(s928,M0.char__gt_integer($rjs_core.Char.charFromCodepoint(63))));if (v929!==false) {var if_res469 = M0.__rjs_quoted__.bytes__gt_string_by_locale(v929,$rjs_core.Char.charFromCodepoint(63));} else {var if_res469 = false;}return if_res469;};var putenv = function(s930, t931) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (string_no_nuls_p(s930)!==false) {var if_res470 = M0.rvoid();} else {var if_res470 = M0.raise_argument_error($rjs_core.PrimitiveSymbol.make("putenv"),$rjs_core.UString.make("string-environment-variable-name?"),0,s930,t931);}if_res470;if (string_no_nuls_p(t931)!==false) {var if_res471 = M0.rvoid();} else {var if_res471 = M0.raise_argument_error($rjs_core.PrimitiveSymbol.make("putenv"),$rjs_core.UString.make("string-no-nuls?"),1,s930,t931);}if_res471;if (M0.environment_variables_set_bang_(M0.current_environment_variables(),M0.__rjs_quoted__.string__gt_bytes_by_locale(s930,M0.char__gt_integer($rjs_core.Char.charFromCodepoint(63))),M0.__rjs_quoted__.string__gt_bytes_by_locale(t931,M0.char__gt_integer($rjs_core.Char.charFromCodepoint(63))),function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return false;})!==false) {var if_res472 = true;} else {var if_res472 = false;}return if_res472;};var __rjs_quoted__ = {};export { __rjs_quoted__,putenv,getenv,string_environment_variable_name_p,bytes_environment_variable_name_p,println,displayln,writeln,port_p,channel_put,channel_try_get,channel_get,guard_evt,load_relative_extension,load_relative,load_by_cd,rationalize };